(self.webpackChunkant_design_vue_pro=self.webpackChunkant_design_vue_pro||[]).push([[5226],{90389:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return w}});var t=l(66252),n=l(56612);const o={class:"ant-pro-table"},i={class:"ant-pro-table-search"},d=(0,t.Uk)(" 新增权限 ");var s=l(44854),u=l(71596);var m=l(55518);const r={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}}},c=["add","delete","update","query","import","export"];var p=(0,t.aZ)({name:"PermissionModal",props:{visible:{type:Boolean,default:!1},model:{type:Object,default:()=>{}}},emits:["ok","cancel"],setup(){const e=(0,s.qj)({id:-1,name:void 0,label:void 0,actions:[]}),a=(0,s.qj)({id:[{required:!0,message:"编码必须填写",type:"number"}],name:[{required:!0,message:"权限名称必须填写"}],label:[{required:!0,message:"显示名称必须填写"}]}),{resetFields:l,validate:t,validateInfos:n}=(0,m.cI)(e,a);return{formLayout:r,permissionActions:c,modelRef:e,validateInfos:n,resetFields:l,handleSubmit:function(){}}}});p.render=function(e,a,l,o,i,d){const s=(0,t.up)("a-input"),u=(0,t.up)("a-form-item"),m=(0,t.up)("a-select-option"),r=(0,t.up)("a-select"),c=(0,t.up)("a-form"),p=(0,t.up)("a-modal");return(0,t.wg)(),(0,t.j4)(p,{title:"权限编辑",visible:e.visible,width:600,centered:"",onOk:e.handleSubmit,onCancel:a[5]||(a[5]=()=>{e.resetFields(),e.$emit("cancel")})},{default:(0,t.w5)((()=>[(0,t.Wm)(c,e.formLayout,{default:(0,t.w5)((()=>[(0,t.Wm)(u,(0,t.dG)({label:"编号",disabled:""},e.validateInfos.id),{default:(0,t.w5)((()=>[(0,t.Wm)(s,{disabled:"",value:e.modelRef.id,"onUpdate:value":a[1]||(a[1]=a=>e.modelRef.id=a),placeholder:"编号"},null,8,["value"])])),_:1},16),(0,t.Wm)(u,(0,t.dG)({label:"权限名称"},e.validateInfos.name),{default:(0,t.w5)((()=>[(0,t.Wm)(s,{value:e.modelRef.name,"onUpdate:value":a[2]||(a[2]=a=>e.modelRef.name=a),placeholder:"权限名称"},null,8,["value"])])),_:1},16),(0,t.Wm)(u,(0,t.dG)({label:"显示名称"},e.validateInfos.label),{default:(0,t.w5)((()=>[(0,t.Wm)(s,{value:e.modelRef.label,"onUpdate:value":a[3]||(a[3]=a=>e.modelRef.label=a),placeholder:"显示名称"},null,8,["value"])])),_:1},16),(0,t.Wm)(u,{label:"操作类型"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{value:e.modelRef.actions,"onUpdate:value":a[4]||(a[4]=a=>e.modelRef.actions=a),placeholder:"操作类型",mode:"tags",style:{width:"100%"}},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.j4)(t.HY,null,(0,t.Ko)(e.permissionActions,(e=>((0,t.wg)(),(0,t.j4)(m,{key:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e),1)])),_:2},1024)))),128))])),_:1},8,["value"])])),_:1})])),_:1},16)])),_:1},8,["visible","onOk"])};var f=p,b=l(31696),h=l(44863);const v=[{align:"center",title:"#",dataIndex:"id"},{align:"center",title:"权限名称",dataIndex:"name"},{align:"center",title:"Action",dataIndex:"actions",slots:{customRender:"actions"},width:400},{align:"center",title:"操作",dataIndex:"action",slots:{customRender:"action"}}];var g=(0,t.aZ)({name:"PermissionList",components:{TableToolbar:u.fj,PermissionModal:f},setup(){const e=(0,s.qj)({permissionModal:(0,s.iH)(),visible:!1,currentData:{}}),{state:a,dynamicColumns:l,dynamicColumnItems:n,handleColumnAllClick:o,handleColumnChange:i,reset:d,move:u}=(0,b.yW)(v,!0),[m,r,{setFull:c,exitFull:p}]=(0,b.O9)(),{context:f,reload:g,setPageInfo:w}=(0,b.$5)(h.Z.getPermissions,{current:1,pageSize:10,tableSize:"middle"});return{state:f,columnState:a,...(0,s.BK)(e),dynamicColumns:l,dynamicColumnItems:n,elRef:m,screenState:r,setFull:c,exitFull:p,reset:d,move:u,handleTableChange:function({current:e,pageSize:a},l){w({current:e,pageSize:a,...l}),g()},handleColumnChange:i,handleColumnAllClick:o,handleReload:function(){w({current:1,pageSize:10}),g()},handleModalVisible:function(a,l){e.visible=a,e.currentData=l,a&&l.id&&(0,t.Y3)((()=>{e.permissionModal.modelRef.id=l.id,e.permissionModal.modelRef.name=l.name,e.permissionModal.modelRef.label=l.label,e.permissionModal.modelRef.actions=l.actions}))}}}});g.render=function(e,a,l,s,u,m){const r=(0,t.up)("a-input"),c=(0,t.up)("a-form-item"),p=(0,t.up)("a-col"),f=(0,t.up)("a-row"),b=(0,t.up)("a-form"),h=(0,t.up)("plus-outlined"),v=(0,t.up)("a-button"),g=(0,t.up)("table-toolbar"),w=(0,t.up)("a-tag"),C=(0,t.up)("a-table"),W=(0,t.up)("a-card"),_=(0,t.up)("permission-modal"),k=(0,t.up)("page-container");return(0,t.wg)(),(0,t.j4)(k,null,{default:(0,t.w5)((()=>[(0,t.Wm)("div",o,[(0,t.Wm)("div",i,[(0,t.Wm)(b,{layout:"horizontal"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{gutter:16,type:"flex",justfy:"start"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{xs:24,sm:24,md:12},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{label:"权限名称"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{placeholder:"权限名称"})])),_:1})])),_:1}),(0,t.Wm)(p,{xs:24,sm:24,md:12},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{label:"描述"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{placeholder:"描述"})])),_:1})])),_:1})])),_:1})])),_:1})]),(0,t.Wm)(W,{"body-style":{padding:0},ref:"elRef"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{title:"角色列表","screen-state":e.screenState,indeterminate:e.columnState.indeterminate,"column-items":e.dynamicColumnItems,"table-size":e.state.tableSize,"onUpdate:table-size":a[2]||(a[2]=a=>e.state.tableSize=a),"check-all":e.columnState.checkAll,"onUpdate:check-all":a[3]||(a[3]=a=>e.columnState.checkAll=a),onReload:e.handleReload,onReset:e.reset,onSetFull:e.setFull,onExitFull:e.exitFull,onChange:e.handleColumnChange,onChangeAll:e.handleColumnAllClick,onMove:e.move},{action:(0,t.w5)((()=>[(0,t.Wm)(v,{type:"primary",onClick:a[1]||(a[1]=a=>e.handleModalVisible(!0,{}))},{default:(0,t.w5)((()=>[(0,t.Wm)(h),d])),_:1})])),_:1},8,["screen-state","indeterminate","column-items","table-size","check-all","onReload","onReset","onSetFull","onExitFull","onChange","onChangeAll","onMove"]),(0,t.Wm)(C,{"row-key":"id",size:e.state.tableSize,loading:e.state.loading,columns:e.dynamicColumns,"data-source":e.state.dataSource,pagination:{current:e.state.current,pageSize:e.state.pageSize,total:e.state.total},onChange:e.handleTableChange},{actions:(0,t.w5)((({record:e})=>[((0,t.wg)(!0),(0,t.j4)(t.HY,null,(0,t.Ko)(e.actions,(e=>((0,t.wg)(),(0,t.j4)(w,{key:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e),1)])),_:2},1024)))),128))])),action:(0,t.w5)((({record:a})=>[(0,t.Wm)("a",{href:"javascript:;",onClick:l=>e.handleModalVisible(!0,a)}," 编辑 ",8,["onClick"])])),_:1},8,["size","loading","columns","data-source","pagination","onChange"])])),_:1},512)]),(0,t.Wm)(_,{ref:"permissionModal",visible:e.visible,model:e.currentData,onCancel:a[4]||(a[4]=a=>e.handleModalVisible(!1,e.currentData))},null,8,["visible","model"])])),_:1})};var w=g}}]);