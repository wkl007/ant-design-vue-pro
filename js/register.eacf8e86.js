"use strict";(self.webpackChunkant_design_vue_pro=self.webpackChunkant_design_vue_pro||[]).push([[685],{70473:function(e,t,a){var o=a(39299),n=a(66252),s=a(98376),r=a(72185),l=a(63765),i=a(32548),c=a(9293),u=a(79751),d={},p=4.5,m="24px",f="24px",v="topRight",g=function(){return document.body},w=null;function h(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;switch(e){case"topLeft":t={left:"0px",top:a,bottom:"auto"};break;case"topRight":t={right:"0px",top:a,bottom:"auto"};break;case"bottomLeft":t={left:"0px",top:"auto",bottom:o};break;default:t={right:"0px",top:"auto",bottom:o}}return t}var b={success:r.Z,info:l.Z,error:i.Z,warning:c.Z};var _={open:function(e){var t=e.icon,a=e.type,o=e.description,r=e.message,l=e.btn,i=e.prefixCls||"ant-notification",c="".concat(i,"-notice"),m=void 0===e.duration?p:e.duration,f=null;if(t)f=function(){return(0,n.Wm)("span",{class:"".concat(c,"-icon")},[t])};else if(a){var _=b[a];f=function(){return(0,n.Wm)(_,{class:"".concat(c,"-icon ").concat(c,"-icon-").concat(a)},null)}}!function(e,t){var a=e.prefixCls,o=e.placement,r=void 0===o?v:o,l=e.getContainer,i=void 0===l?g:l,c=e.top,p=e.bottom,m=e.closeIcon,f=void 0===m?w:m,b="".concat(a,"-").concat(r);d[b]?t(d[b]):s.Z.newInstance({prefixCls:a,class:"".concat(a,"-").concat(r),style:h(r,c,p),getContainer:i,closeIcon:function(){return(0,n.Wm)("span",{class:"".concat(a,"-close-x")},[f||(0,n.Wm)(u.Z,{class:"".concat(a,"-close-icon")},null)])}},(function(e){d[b]=e,t(e)}))}({prefixCls:i,placement:e.placement,top:e.top,bottom:e.bottom,getContainer:e.getContainer,closeIcon:e.closeIcon},(function(t){t.notice({content:function(){return(0,n.Wm)("div",{class:f?"".concat(c,"-with-icon"):""},[f&&f(),(0,n.Wm)("div",{class:"".concat(c,"-message")},[!o&&f?(0,n.Wm)("span",{class:"".concat(c,"-message-single-line-auto-margin")},null):null,r]),(0,n.Wm)("div",{class:"".concat(c,"-description")},[o]),l?(0,n.Wm)("span",{class:"".concat(c,"-btn")},[l]):null])},duration:m,closable:!0,onClose:e.onClose,onClick:e.onClick,key:e.key,style:e.style||{},class:e.class})}))},close:function(e){Object.keys(d).forEach((function(t){return d[t].removeNotice(e)}))},config:function(e){var t=e.duration,a=e.placement,o=e.bottom,n=e.top,s=e.getContainer,r=e.closeIcon;void 0!==t&&(p=t),void 0!==a&&(v=a),void 0!==o&&(f="number"==typeof o?"".concat(o,"px"):o),void 0!==n&&(m="number"==typeof n?"".concat(n,"px"):n),void 0!==s&&(g=s),void 0!==r&&(w=r)},destroy:function(){Object.keys(d).forEach((function(e){d[e].destroy(),delete d[e]}))}};["success","info","warning","error"].forEach((function(e){_[e]=function(t){return _.open((0,o.Z)((0,o.Z)({},t),{type:e}))}})),_.warn=_.warning,t.Z=_},87012:function(e,t,a){a(54287)},49113:function(e,t,a){a.d(t,{Z:function(){return n}});var o=a(91046);class n{static login(e){return o.Z.request({url:"/login/account",method:"post",data:e})}static getUserInfo(){return o.Z.request({url:"/currentUser",method:"get"})}static logout(){return o.Z.request({url:"/logout",method:"post"})}static register(e){return o.Z.request({url:"/register",method:"post",data:e})}}},92962:function(e,t,a){a.r(t),a.d(t,{default:function(){return Z}});var o=a(66252),n=a(3577);(0,o.dD)("data-v-eac5fbf2");const s={class:"main register"},r=(0,o._)("h3",null,"注册",-1),l={style:{width:"240px"}},i=(0,o._)("div",{style:{"margin-top":"10px"}},[(0,o._)("span",null,"请至少输入 6 个字符。建议输入字母、数字、特殊字符组合。")],-1),c=(0,o.Uk)("+86"),u=(0,o.Uk)("+87"),d=(0,o.Uk)(" 注册 "),p=(0,o.Uk)(" 使用已有账户登录 ");(0,o.Cn)();a(87012);var m=a(70473),f=(a(70586),a(61446)),v=a(2262),g=a(30571),w=a(42119),h=a(49113),b=a(91046);const _={0:"低",1:"低",2:"中",3:"强"},W={0:"error",1:"error",2:"warning",3:"success"},C={0:"#ff0000",1:"#ff0000",2:"#ff7e05",3:"#52c41a"};let y;var k=(0,o.aZ)({name:"Register",setup(){const e=(0,w.tv)(),t=(0,v.qj)({time:60,smsSendBtn:!1,passwordLevel:0,passwordLevelChecked:!1,percent:10,progressColor:"#FF0000",registerBtn:!1}),a=(0,v.qj)({email:"",password:"",confirmPassword:"",mobile:"",captcha:""}),o=(0,v.qj)({email:[{required:!0,type:"email",message:"请输入邮箱地址"}],password:[{required:!0,message:"至少6位密码，区分大小写"},{validator:(e,a)=>new Promise(((e,o)=>{let n=0;/[0-9]/.test(a)&&n++,/[a-zA-Z]/.test(a)&&n++,/[^0-9a-zA-Z_]/.test(a)&&n++,t.passwordLevel=n,t.percent=30*n,n>=2?(n>=3&&(t.percent=100),e(null)):(0===n&&(t.percent=10),o(new Error("密码强度不够")))}))}],confirmPassword:[{required:!0,message:"至少6位密码，区分大小写"},{validator:(e,t)=>new Promise(((e,o)=>{const n=a.password;t||o(new Error("请输入密码")),t&&n&&t.trim()!==n.trim()&&o(new Error("两次密码不一致")),e(null)}))}],mobile:[{required:!0,message:"请输入正确的手机号",pattern:/^1[3456789]\d{9}$/}],captcha:[{required:!0,message:"请输入验证码"}]}),{validateInfos:n,validate:s}=(0,g.Z)(a,o);return{...(0,v.BK)(t),form:a,validateInfos:n,passwordLevelClass:(0,v.Fl)((()=>W[t.passwordLevel])),passwordLevelName:(0,v.Fl)((()=>_[t.passwordLevel])),passwordLevelColor:(0,v.Fl)((()=>C[t.passwordLevel])),getCaptcha:async function(e){try{e.preventDefault();const{mobile:a}=await s("mobile");y=setInterval((()=>{t.time--<=0&&(t.time=60,t.smsSendBtn=!1,clearInterval(y))}),1e3);const o=f.Z.loading("验证码发送中...",0),{captcha:n}=await class{static getSmsCaptcha(e){return b.Z.request({url:"/message/sms",method:"get",params:e})}}.getSmsCaptcha({mobile:a});setTimeout(o,3e3),m.Z.success({message:"提示",description:`验证码获取成功，您的验证码为：${n}`,duration:8})}catch(e){f.Z.destroy(),clearInterval(y),t.time=60,t.smsSendBtn=!1}},handleSubmit:async function(a){try{a.preventDefault(),t.registerBtn=!0;const o=await s(),{data:{email:n}}=await h.Z.register(o);f.Z.info("注册成功"),await e.push({path:"/user/registerResult",query:{email:n}})}catch(a){t.registerBtn=!1}}}}});k.render=function(e,t,a,m,f,v){const g=(0,o.up)("a-input"),w=(0,o.up)("a-form-item"),h=(0,o.up)("a-progress"),b=(0,o.up)("a-input-password"),_=(0,o.up)("a-popover"),W=(0,o.up)("a-select-option"),C=(0,o.up)("a-select"),y=(0,o.up)("mail-outlined"),k=(0,o.up)("a-col"),Z=(0,o.up)("a-button"),x=(0,o.up)("a-row"),I=(0,o.up)("router-link"),L=(0,o.up)("a-form");return(0,o.wg)(),(0,o.iD)("div",s,[r,(0,o.Wm)(L,{layout:"vertical",model:e.form,onSubmit:e.handleSubmit},{default:(0,o.w5)((()=>[(0,o.Wm)(w,(0,n.vs)((0,o.F4)(e.validateInfos.email)),{default:(0,o.w5)((()=>[(0,o.Wm)(g,{size:"large",placeholder:"邮箱",value:e.form.email,"onUpdate:value":t[0]||(t[0]=t=>e.form.email=t)},null,8,["value"])])),_:1},16),(0,o.Wm)(_,{placement:"rightTop",trigger:"focus","get-popup-container":e=>e.parentElement,visible:e.passwordLevelChecked,"onUpdate:visible":t[3]||(t[3]=t=>e.passwordLevelChecked=t)},{content:(0,o.w5)((()=>[(0,o._)("div",l,[(0,o._)("div",{class:(0,n.C_)(e.passwordLevelClass)}," 强度："+(0,n.zw)(e.passwordLevelName),3),(0,o.Wm)(h,{percent:e.percent,"show-info":!1,"stroke-color":e.passwordLevelColor},null,8,["percent","stroke-color"]),i])])),default:(0,o.w5)((()=>[(0,o.Wm)(w,(0,n.vs)((0,o.F4)(e.validateInfos.password)),{default:(0,o.w5)((()=>[(0,o.Wm)(b,{size:"large",placeholder:"至少6位密码，区分大小写",value:e.form.password,"onUpdate:value":t[1]||(t[1]=t=>e.form.password=t),onFocus:t[2]||(t[2]=t=>e.passwordLevelChecked=!0)},null,8,["value"])])),_:1},16)])),_:1},8,["get-popup-container","visible"]),(0,o.Wm)(w,(0,n.vs)((0,o.F4)(e.validateInfos.confirmPassword)),{default:(0,o.w5)((()=>[(0,o.Wm)(b,{size:"large",placeholder:"确认密码",value:e.form.confirmPassword,"onUpdate:value":t[4]||(t[4]=t=>e.form.confirmPassword=t)},null,8,["value"])])),_:1},16),(0,o.Wm)(w,(0,n.vs)((0,o.F4)(e.validateInfos.mobile)),{default:(0,o.w5)((()=>[(0,o.Wm)(g,{size:"large",placeholder:"11 位手机号",value:e.form.mobile,"onUpdate:value":t[5]||(t[5]=t=>e.form.mobile=t)},{addonBefore:(0,o.w5)((()=>[(0,o.Wm)(C,{size:"large","default-value":"+86"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{value:"+86"},{default:(0,o.w5)((()=>[c])),_:1}),(0,o.Wm)(W,{value:"+87"},{default:(0,o.w5)((()=>[u])),_:1})])),_:1})])),_:1},8,["value"])])),_:1},16),(0,o.Wm)(x,{gutter:16},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{span:16},{default:(0,o.w5)((()=>[(0,o.Wm)(w,(0,n.vs)((0,o.F4)(e.validateInfos.captcha)),{default:(0,o.w5)((()=>[(0,o.Wm)(g,{size:"large",placeholder:"验证码",value:e.form.captcha,"onUpdate:value":t[6]||(t[6]=t=>e.form.captcha=t)},{prefix:(0,o.w5)((()=>[(0,o.Wm)(y,{class:"prefix-icon"})])),_:1},8,["value"])])),_:1},16)])),_:1}),(0,o.Wm)(k,{span:8},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{size:"large",block:"",onClick:e.getCaptcha},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.smsSendBtn?`${e.time} s`:"获取验证码"),1)])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{size:"large",type:"primary",loading:e.registerBtn,disabled:e.registerBtn,"html-type":"submit",style:{width:"50%"}},{default:(0,o.w5)((()=>[d])),_:1},8,["loading","disabled"]),(0,o.Wm)(I,{class:"login",to:"/user/login",style:{float:"right","line-height":"40px"}},{default:(0,o.w5)((()=>[p])),_:1})])),_:1})])),_:1},8,["model","onSubmit"])])},k.__scopeId="data-v-eac5fbf2";var Z=k}}]);