(self.webpackChunkant_design_vue_pro=self.webpackChunkant_design_vue_pro||[]).push([[8334],{34851:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ee}});var a=n(66252),r=n(3577),u=(0,a.HX)("data-v-533148cd");(0,a.dD)("data-v-533148cd");var o=(0,a.Uk)("高级表单常见于一次性输入和提交大批量数据的场景。"),l={class:"popover-wrapper"},d={class:""},i={class:"antd-pro-pages-forms-style-errorField"},f={key:0,class:"antd-pro-pages-forms-style-errorIcon"};(0,a.Cn)();var c=u((function(e,t,n,c,m,s){var p=(0,a.up)("repository-form"),v=(0,a.up)("task-form"),w=(0,a.up)("member-list"),k=(0,a.up)("close-circle-outlined"),g=(0,a.up)("a-popover"),W=(0,a.up)("a-button"),y=(0,a.up)("footer-toolbar"),_=(0,a.up)("page-container");return(0,a.wg)(),(0,a.j4)(_,{class:"advance-form",title:"高级表单"},{content:u((function(){return[o]})),default:u((function(){return[(0,a.Wm)(p,{ref:"repositoryForm",class:"antd-pro-pages-form-advanced-form-style-card"},null,512),(0,a.Wm)(v,{ref:"taskForm",class:"antd-pro-pages-form-advanced-form-style-card"},null,512),(0,a.Wm)(w),(0,a.Wm)(y,null,{default:u((function(){return[(0,a.Wm)("span",l,[(0,a.Wm)(g,{title:"表单校验信息","overlay-class-name":"antd-pro-pages-forms-style-errorPopover",trigger:"click","get-popup-container":function(e){return e.parentNode}},{content:u((function(){return[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(e.state.errors,(function(t){return(0,a.wg)(),(0,a.j4)("li",{key:t.key,class:"antd-pro-pages-forms-style-errorListItem",onClick:function(n){return e.handleErrorClick(t.key)}},[(0,a.Wm)(k,{class:"antd-pro-pages-forms-style-errorIcon"}),(0,a.Wm)("div",d,(0,r.zw)(t.message),1),(0,a.Wm)("div",i,(0,r.zw)(t.fieldLabel),1)],8,["onClick"])})),128))]})),default:u((function(){return[(0,a.Wm)("span",null,[e.state.errors.length&&e.state.errors.length>0?((0,a.wg)(),(0,a.j4)("span",f,[(0,a.Wm)(k),(0,a.Uk)(" "+(0,r.zw)(e.state.errors.length),1)])):(0,a.ry)("",!0)])]})),_:1},8,["get-popup-container"])]),(0,a.Wm)(W,{type:"primary",onClick:e.handleSubmit},{default:u((function(){return[(0,a.Uk)((0,r.zw)(e.t("submit")),1)]})),_:1},8,["onClick"])]})),_:1})]})),_:1})})),m=n(37171),s=(n(35666),n(21249),n(47941),n(41539),n(78783),n(33948),n(2262)),p=n(64239),v=n(51916),w=(n(68309),(0,a.Uk)("王同学")),k=(0,a.Uk)("李同学"),g=(0,a.Uk)("黄同学"),W=(0,a.Uk)("王晓丽"),y=(0,a.Uk)("李军"),_=(0,a.Uk)("公开"),b=(0,a.Uk)("私密"),h=(0,a.Uk)("Submit");var R=n(55518),I=(0,a.aZ)({name:"RepositoryForm",props:{showSubmit:{type:Boolean,default:!1}},setup:function(){var e=(0,s.qj)({name:void 0,url:void 0,owner:void 0,approver:void 0,dateRange:[],type:void 0}),t=(0,s.qj)({name:[{required:!0,message:"请输入仓库名称"}],url:[{required:!0,validator:function(e,t){return new Promise((function(e,n){/^user-(.*)$/.test(t)||n("需要以 user- 开头"),e()}))}}]}),n=(0,R.cI)(e,t),a=n.resetFields,r=n.validate;return{modelRef:e,validateInfos:n.validateInfos,validate:r,resetFields:a,handleSubmit:function(e){e.preventDefault()}}}});I.render=function(e,t,n,r,u,o){var l=(0,a.up)("a-input"),d=(0,a.up)("a-form-item"),i=(0,a.up)("a-col"),f=(0,a.up)("a-select-option"),c=(0,a.up)("a-select"),m=(0,a.up)("a-row"),s=(0,a.up)("a-range-picker"),p=(0,a.up)("a-button"),v=(0,a.up)("a-form"),R=(0,a.up)("a-card");return(0,a.wg)(),(0,a.j4)(R,{bordered:!1,title:"仓库管理"},{default:(0,a.w5)((function(){return[(0,a.Wm)(v,{class:"form","scroll-to-first-error":""},{default:(0,a.w5)((function(){return[(0,a.Wm)(m,{class:"form-row",gutter:16},{default:(0,a.w5)((function(){return[(0,a.Wm)(i,{lg:6,md:12,sm:24},{default:(0,a.w5)((function(){return[(0,a.Wm)(d,(0,a.dG)({label:"仓库名"},e.validateInfos.name,{"data-validate-id":"name"}),{default:(0,a.w5)((function(){return[(0,a.Wm)(l,{value:e.modelRef.name,"onUpdate:value":t[1]||(t[1]=function(t){return e.modelRef.name=t}),placeholder:"请输入仓库名称"},null,8,["value"])]})),_:1},16)]})),_:1}),(0,a.Wm)(i,{xl:{span:7,offset:1},lg:{span:8},md:{span:12},sm:24},{default:(0,a.w5)((function(){return[(0,a.Wm)(d,(0,a.dG)({label:"仓库域名"},e.validateInfos.url,{"data-validate-id":"url"}),{default:(0,a.w5)((function(){return[(0,a.Wm)(l,{value:e.modelRef.url,"onUpdate:value":t[2]||(t[2]=function(t){return e.modelRef.url=t}),"addon-before":"http://","addon-after":".com",placeholder:"请输入"},null,8,["value"])]})),_:1},16)]})),_:1}),(0,a.Wm)(i,{xl:{span:9,offset:1},lg:{span:10},md:{span:24},sm:24},{default:(0,a.w5)((function(){return[(0,a.Wm)(d,(0,a.dG)({label:"仓库管理员"},e.validateInfos.owner),{default:(0,a.w5)((function(){return[(0,a.Wm)(c,{value:e.modelRef.owner,"onUpdate:value":t[3]||(t[3]=function(t){return e.modelRef.owner=t}),placeholder:"请选择管理员"},{default:(0,a.w5)((function(){return[(0,a.Wm)(f,{value:"王同学"},{default:(0,a.w5)((function(){return[w]})),_:1}),(0,a.Wm)(f,{value:"李同学"},{default:(0,a.w5)((function(){return[k]})),_:1}),(0,a.Wm)(f,{value:"黄同学"},{default:(0,a.w5)((function(){return[g]})),_:1})]})),_:1},8,["value"])]})),_:1},16)]})),_:1})]})),_:1}),(0,a.Wm)(m,{class:"form-row",gutter:16},{default:(0,a.w5)((function(){return[(0,a.Wm)(i,{lg:6,md:12,sm:24},{default:(0,a.w5)((function(){return[(0,a.Wm)(d,(0,a.dG)({label:"审批人"},e.validateInfos.approver),{default:(0,a.w5)((function(){return[(0,a.Wm)(c,{value:e.modelRef.approver,"onUpdate:value":t[4]||(t[4]=function(t){return e.modelRef.approver=t}),placeholder:"请选择审批员"},{default:(0,a.w5)((function(){return[(0,a.Wm)(f,{value:"王晓丽"},{default:(0,a.w5)((function(){return[W]})),_:1}),(0,a.Wm)(f,{value:"李军"},{default:(0,a.w5)((function(){return[y]})),_:1})]})),_:1},8,["value"])]})),_:1},16)]})),_:1}),(0,a.Wm)(i,{xl:{span:7,offset:1},lg:{span:8},md:{span:12},sm:24},{default:(0,a.w5)((function(){return[(0,a.Wm)(d,(0,a.dG)({label:"生效日期"},e.validateInfos.dateRange),{default:(0,a.w5)((function(){return[(0,a.Wm)(s,{value:e.modelRef.dateRange,"onUpdate:value":t[5]||(t[5]=function(t){return e.modelRef.dateRange=t}),style:{width:"100%"}},null,8,["value"])]})),_:1},16)]})),_:1}),(0,a.Wm)(i,{xl:{span:9,offset:1},lg:{span:10},md:{span:24},sm:24},{default:(0,a.w5)((function(){return[(0,a.Wm)(d,(0,a.dG)({label:"仓库类型"},e.validateInfos.type),{default:(0,a.w5)((function(){return[(0,a.Wm)(c,{value:e.modelRef.type,"onUpdate:value":t[6]||(t[6]=function(t){return e.modelRef.type=t}),placeholder:"请选择仓库类型"},{default:(0,a.w5)((function(){return[(0,a.Wm)(f,{value:"公开"},{default:(0,a.w5)((function(){return[_]})),_:1}),(0,a.Wm)(f,{value:"私密"},{default:(0,a.w5)((function(){return[b]})),_:1})]})),_:1},8,["value"])]})),_:1},16)]})),_:1})]})),_:1}),e.showSubmit?((0,a.wg)(),(0,a.j4)(d,{key:0},{default:(0,a.w5)((function(){return[(0,a.Wm)(p,{onClick:e.handleSubmit},{default:(0,a.w5)((function(){return[h]})),_:1},8,["onClick"])]})),_:1})):(0,a.ry)("",!0)]})),_:1})]})),_:1})};var C=I,U=(0,a.Uk)("黄丽丽"),S=(0,a.Uk)("李大刀"),j=(0,a.Uk)("王伟"),x=(0,a.Uk)("李红军"),q=(0,a.Uk)("定时执行"),F=(0,a.Uk)("周期执行"),G=(0,a.Uk)("Submit");n(923);var Z=n(70473),D=(0,a.aZ)({name:"TaskForm",props:{showSubmit:{type:Boolean,default:!1}},setup:function(){var e=(0,s.qj)({name2:void 0,url2:void 0,owner2:void 0,approver2:void 0,dateRange2:void 0,type2:void 0}),t=(0,s.qj)({name2:[{required:!0,message:"请输入任务名称",whitespace:!0}],url2:[{required:!0,message:"请输入任务描述",whitespace:!0}],owner2:[{required:!0,message:"请选择执行人"}],approver2:[{required:!0,message:"请选择责任人"}],dateRange2:[{required:!0,message:"请选择提醒时间",type:"object"}],type2:[{required:!0,message:"请选择任务类型"}]}),n=(0,R.cI)(e,t),a=n.resetFields,r=n.validate,u=n.validateInfos;return{modelRef:e,validateInfos:u,resetFields:a,validate:r,handleSubmit:function(t){t.preventDefault(),r().then((function(){Z.Z.error({message:"Received values of form:",description:(0,s.IU)(e)})}))}}}});D.render=function(e,t,n,r,u,o){var l=(0,a.up)("a-input"),d=(0,a.up)("a-form-item"),i=(0,a.up)("a-col"),f=(0,a.up)("a-select-option"),c=(0,a.up)("a-select"),m=(0,a.up)("a-row"),s=(0,a.up)("a-time-picker"),p=(0,a.up)("a-button"),v=(0,a.up)("a-form"),w=(0,a.up)("a-card");return(0,a.wg)(),(0,a.j4)(w,{bordered:!1,title:"任务管理"},{default:(0,a.w5)((function(){return[(0,a.Wm)(v,{class:"task-form","scroll-to-first-error":""},{default:(0,a.w5)((function(){return[(0,a.Wm)(m,{class:"form-row",gutter:16},{default:(0,a.w5)((function(){return[(0,a.Wm)(i,{lg:6,md:12,sm:24},{default:(0,a.w5)((function(){return[(0,a.Wm)(d,(0,a.dG)({label:"任务名"},e.validateInfos.name2,{"data-validate-id":"name2"}),{default:(0,a.w5)((function(){return[(0,a.Wm)(l,{value:e.modelRef.name2,"onUpdate:value":t[1]||(t[1]=function(t){return e.modelRef.name2=t}),placeholder:"请输入任务名称"},null,8,["value"])]})),_:1},16)]})),_:1}),(0,a.Wm)(i,{xl:{span:7,offset:1},lg:{span:8},md:{span:12},sm:24},{default:(0,a.w5)((function(){return[(0,a.Wm)(d,(0,a.dG)({label:"任务描述"},e.validateInfos.url2,{"data-validate-id":"url2"}),{default:(0,a.w5)((function(){return[(0,a.Wm)(l,{value:e.modelRef.url2,"onUpdate:value":t[2]||(t[2]=function(t){return e.modelRef.url2=t}),placeholder:"请输入任务描述"},null,8,["value"])]})),_:1},16)]})),_:1}),(0,a.Wm)(i,{xl:{span:9,offset:1},lg:{span:10},md:{span:24},sm:24},{default:(0,a.w5)((function(){return[(0,a.Wm)(d,(0,a.dG)({label:"执行人"},e.validateInfos.owner2,{"data-validate-id":"owner2"}),{default:(0,a.w5)((function(){return[(0,a.Wm)(c,{value:e.modelRef.owner2,"onUpdate:value":t[3]||(t[3]=function(t){return e.modelRef.owner2=t}),placeholder:"请选择执行人"},{default:(0,a.w5)((function(){return[(0,a.Wm)(f,{value:"黄丽丽"},{default:(0,a.w5)((function(){return[U]})),_:1}),(0,a.Wm)(f,{value:"李大刀"},{default:(0,a.w5)((function(){return[S]})),_:1})]})),_:1},8,["value"])]})),_:1},16)]})),_:1})]})),_:1}),(0,a.Wm)(m,{class:"form-row",gutter:16},{default:(0,a.w5)((function(){return[(0,a.Wm)(i,{lg:6,md:12,sm:24},{default:(0,a.w5)((function(){return[(0,a.Wm)(d,(0,a.dG)({label:"责任人"},e.validateInfos.approver2,{"data-validate-id":"approver2"}),{default:(0,a.w5)((function(){return[(0,a.Wm)(c,{value:e.modelRef.approver2,"onUpdate:value":t[4]||(t[4]=function(t){return e.modelRef.approver2=t}),placeholder:"请选择责任人"},{default:(0,a.w5)((function(){return[(0,a.Wm)(f,{value:"王伟"},{default:(0,a.w5)((function(){return[j]})),_:1}),(0,a.Wm)(f,{value:"李红军"},{default:(0,a.w5)((function(){return[x]})),_:1})]})),_:1},8,["value"])]})),_:1},16)]})),_:1}),(0,a.Wm)(i,{xl:{span:7,offset:1},lg:{span:8},md:{span:12},sm:24},{default:(0,a.w5)((function(){return[(0,a.Wm)(d,(0,a.dG)({label:"提醒时间"},e.validateInfos.dateRange2,{"data-validate-id":"dateRange2"}),{default:(0,a.w5)((function(){return[(0,a.Wm)(s,{value:e.modelRef.dateRange2,"onUpdate:value":t[5]||(t[5]=function(t){return e.modelRef.dateRange2=t}),style:{width:"100%"}},null,8,["value"])]})),_:1},16)]})),_:1}),(0,a.Wm)(i,{xl:{span:9,offset:1},lg:{span:10},md:{span:24},sm:24},{default:(0,a.w5)((function(){return[(0,a.Wm)(d,(0,a.dG)({label:"任务类型"},e.validateInfos.type2,{"data-validate-id":"type2"}),{default:(0,a.w5)((function(){return[(0,a.Wm)(c,{modelValue:e.modelRef.type2,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.modelRef.type2=t}),placeholder:"请选择任务类型"},{default:(0,a.w5)((function(){return[(0,a.Wm)(f,{value:"定时执行"},{default:(0,a.w5)((function(){return[q]})),_:1}),(0,a.Wm)(f,{value:"周期执行"},{default:(0,a.w5)((function(){return[F]})),_:1})]})),_:1},8,["modelValue"])]})),_:1},16)]})),_:1})]})),_:1}),e.showSubmit?((0,a.wg)(),(0,a.j4)(d,{key:0},{default:(0,a.w5)((function(){return[(0,a.Wm)(p,{onClick:e.handleSubmit},{default:(0,a.w5)((function(){return[G]})),_:1},8,["onClick"])]})),_:1})):(0,a.ry)("",!0)]})),_:1})]})),_:1})};var H=D,N=(0,a.HX)("data-v-65b60d49");(0,a.dD)("data-v-65b60d49");var z={key:0},L=(0,a.Wm)("a",null,"删除",-1),M={key:1},T={key:1},E=(0,a.Wm)("a",null,"删除",-1),P=(0,a.Uk)(" 新增成员 ");(0,a.Cn)();var O=N((function(e,t,n,u,o,l){var d=(0,a.up)("a-input"),i=(0,a.up)("a-divider"),f=(0,a.up)("a-popconfirm"),c=(0,a.up)("a-table"),m=(0,a.up)("plus-outlined"),s=(0,a.up)("a-button"),p=(0,a.up)("a-card");return(0,a.wg)(),(0,a.j4)(p,{bordered:!1,title:"成员管理"},{default:N((function(){return[(0,a.Wm)(c,{pagination:!1,columns:e.columns,"data-source":e.state.dataSource,loading:e.state.loading},(0,a.Nv)({operation:N((function(t){var n=t.record;return[n.editable?((0,a.wg)(),(0,a.j4)(a.HY,{key:0},[n.isNew?((0,a.wg)(),(0,a.j4)("span",z,[(0,a.Wm)("a",{onClick:function(t){return e.saveRow(n)}},"添加",8,["onClick"]),(0,a.Wm)(i,{type:"vertical"}),(0,a.Wm)(f,{title:"是否要删除此行？",onConfirm:function(t){return e.handleRemove(n.key)}},{default:N((function(){return[L]})),_:2},1032,["onConfirm"])])):((0,a.wg)(),(0,a.j4)("span",M,[(0,a.Wm)("a",{onClick:function(t){return e.saveRow(n)}},"保存",8,["onClick"]),(0,a.Wm)(i,{type:"vertical"}),(0,a.Wm)("a",{onClick:function(t){return e.handleCancel(n.key)}},"取消",8,["onClick"])]))],64)):((0,a.wg)(),(0,a.j4)("span",T,[(0,a.Wm)("a",{onClick:function(t){return e.toggleEdit(n.key)}},"编辑",8,["onClick"]),(0,a.Wm)(i,{type:"vertical"}),(0,a.Wm)(f,{title:"是否要删除此行？","ok-text":e.t("confirm.ok"),"cancel-text":e.t("confirm.cancel"),onConfirm:function(t){return e.handleRemove(n.key)}},{default:N((function(){return[E]})),_:2},1032,["ok-text","cancel-text","onConfirm"])]))]})),_:2},[(0,a.Ko)(["name","workId","department"],(function(t,n){return{name:t,fn:N((function(u){var o=u.text,l=u.record;return[l.editable?((0,a.wg)(),(0,a.j4)(d,{key:t,style:{margin:"-5px 0"},value:o,placeholder:e.columns[n].title,onChange:function(n){return e.handleChange(n.target.value,l.key,t)}},null,8,["value","placeholder","onChange"])):((0,a.wg)(),(0,a.j4)(a.HY,{key:1},[(0,a.Uk)((0,r.zw)(o),1)],64))]}))}}))]),1032,["columns","data-source","loading"]),(0,a.Wm)(s,{style:{width:"100%","margin-top":"16px","margin-bottom":"8px"},type:"dashed",onClick:e.handleNewMember},{default:N((function(){return[(0,a.Wm)(m),P]})),_:1},8,["onClick"])]})),_:1})})),V=n(13782),Y=(n(71784),n(61446)),B=n(30813),K=(n(69826),n(39714),n(57327),[{title:"成员姓名",dataIndex:"name",key:"name",width:"20%",slots:{customRender:"name"}},{title:"工号",dataIndex:"workId",key:"workId",width:"20%",slots:{customRender:"workId"}},{title:"所属部门",dataIndex:"department",key:"department",width:"40%",slots:{customRender:"department"}},{title:"操作",key:"action",slots:{customRender:"operation"}}]),X=[{key:"1",name:"小明",workId:"001",editable:!1,department:"行政部"},{key:"2",name:"李莉",workId:"002",editable:!1,department:"IT部"},{key:"3",name:"王小帅",workId:"003",editable:!1,department:"财务部"}],A=(0,a.aZ)({name:"MemberList",setup:function(){var e=(0,v.cm)().i18n,t=(0,s.qj)({loading:!1,dataSource:X});return{t:e,state:t,columns:K,handleSubmit:function(e){e.preventDefault()},handleNewMember:function(){var e=t.dataSource.length,n={key:0===e?"1":(parseInt(t.dataSource[e-1].key)+1).toString(),name:"",workId:"",department:"",editable:!0,isNew:!0};t.dataSource.push(n)},handleChange:function(e,n,a){var r=(0,B.Z)(t.dataSource),u=r.find((function(e){return n===e.key}));u&&(u[a]=e,t.dataSource=r)},toggleEdit:function(e){var n=t.dataSource.find((function(t){return t.key===e}))||{key:"-1"};n&&(n._originalData=(0,V.Z)({},n),n.editable=!n.editable)},saveRow:function(e){t.loading=!0;var n=e.key,a=e.name,r=e.workId,u=e.department;if(!a||!r||!u)return t.loading=!1,void Y.Z.error("请填写完整成员信息。");new Promise((function(e){setTimeout((function(){e({loop:!1})}),800)})).then((function(){var e=t.dataSource.find((function(e){return e.key===n}));e&&(e.editable=!1,e.isNew=!1,Y.Z.success("保存成功。")),t.loading=!1}))},handleRemove:function(e){t.dataSource=t.dataSource.filter((function(t){return t.key!==e}))},handleCancel:function(e){var n=t.dataSource.find((function(t){return t.key===e}));n&&(Object.assign(n,(0,V.Z)({},n._originalData)),n._originalData=void 0)}}}});A.render=O,A.__scopeId="data-v-65b60d49";var $=A,J={name:"仓库名",url:"仓库域名",owner:"仓库管理员",approver:"审批人",dateRange:"生效日期",type:"仓库类型",name2:"任务名",url2:"任务描述",owner2:"执行人",approver2:"责任人",dateRange2:"生效日期",type2:"任务类型"},Q=(0,a.aZ)({name:"AdvanceForm",components:{RepositoryForm:C,TaskForm:H,MemberList:$,FooterToolbar:v.Sc},setup:function(){var e=(0,v.cm)().i18n,t=(0,s.qj)({errors:[]}),n=(0,s.iH)(null),a=(0,s.iH)(null);function r(e){t.errors=Object.keys((0,s.IU)(e)).map((function(t){return{key:t,message:e[t].help,fieldLabel:J[t]}}))}function u(){return(u=(0,m.Z)(regeneratorRuntime.mark((function e(t){var u,o,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([null===(u=n.value)||void 0===u?void 0:u.validate(),null===(o=a.value)||void 0===o?void 0:o.validate()]);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),r(Object.assign({},null===(l=n.value)||void 0===l?void 0:l.validateInfos,null===(d=a.value)||void 0===d?void 0:d.validateInfos));case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return{t:e,state:t,repositoryForm:n,taskForm:a,handleErrorClick:function(e){var t=document.querySelector("[data-validate-id=".concat(e,"]"));t&&(0,p.Z)(t,{scrollMode:"if-needed",block:"center"})},handleSubmit:function(e){return u.apply(this,arguments)}}}});Q.render=c,Q.__scopeId="data-v-533148cd";var ee=Q}}]);