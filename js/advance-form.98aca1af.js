(self.webpackChunkant_design_vue_pro=self.webpackChunkant_design_vue_pro||[]).push([[4355],{49500:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return A}});var l=t(66252),o=t(56612);const d=(0,l.HX)("data-v-533148cd");(0,l.dD)("data-v-533148cd");const n=(0,l.Uk)("高级表单常见于一次性输入和提交大批量数据的场景。"),r={class:"popover-wrapper"},u={class:""},s={class:"antd-pro-pages-forms-style-errorField"},m={key:0,class:"antd-pro-pages-forms-style-errorIcon"};(0,l.Cn)();const i=d(((e,a,t,i,p,f)=>{const c=(0,l.up)("repository-form"),v=(0,l.up)("task-form"),w=(0,l.up)("member-list"),k=(0,l.up)("close-circle-outlined"),g=(0,l.up)("a-popover"),W=(0,l.up)("a-button"),y=(0,l.up)("footer-toolbar"),_=(0,l.up)("page-container");return(0,l.wg)(),(0,l.j4)(_,{class:"advance-form",title:"高级表单"},{content:d((()=>[n])),default:d((()=>[(0,l.Wm)(c,{ref:"repositoryForm",class:"antd-pro-pages-form-advanced-form-style-card"},null,512),(0,l.Wm)(v,{ref:"taskForm",class:"antd-pro-pages-form-advanced-form-style-card"},null,512),(0,l.Wm)(w),(0,l.Wm)(y,null,{default:d((()=>[(0,l.Wm)("span",r,[(0,l.Wm)(g,{title:"表单校验信息","overlay-class-name":"antd-pro-pages-forms-style-errorPopover",trigger:"click","get-popup-container":e=>e.parentNode},{content:d((()=>[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(e.state.errors,(a=>((0,l.wg)(),(0,l.j4)("li",{key:a.key,class:"antd-pro-pages-forms-style-errorListItem",onClick:t=>e.handleErrorClick(a.key)},[(0,l.Wm)(k,{class:"antd-pro-pages-forms-style-errorIcon"}),(0,l.Wm)("div",u,(0,o.zw)(a.message),1),(0,l.Wm)("div",s,(0,o.zw)(a.fieldLabel),1)],8,["onClick"])))),128))])),default:d((()=>[(0,l.Wm)("span",null,[e.state.errors.length&&e.state.errors.length>0?((0,l.wg)(),(0,l.j4)("span",m,[(0,l.Wm)(k),(0,l.Uk)(" "+(0,o.zw)(e.state.errors.length),1)])):(0,l.ry)("",!0)])])),_:1},8,["get-popup-container"])]),(0,l.Wm)(W,{type:"primary",onClick:e.handleSubmit},{default:d((()=>[(0,l.Uk)((0,o.zw)(e.t("submit")),1)])),_:1},8,["onClick"])])),_:1})])),_:1})}));var p=t(44854),f=t(64239),c=t(71596);const v=(0,l.Uk)("王同学"),w=(0,l.Uk)("李同学"),k=(0,l.Uk)("黄同学"),g=(0,l.Uk)("王晓丽"),W=(0,l.Uk)("李军"),y=(0,l.Uk)("公开"),_=(0,l.Uk)("私密"),b=(0,l.Uk)("Submit");var h=t(55518),R=(0,l.aZ)({name:"RepositoryForm",props:{showSubmit:{type:Boolean,default:!1}},setup(){const e=(0,p.qj)({name:void 0,url:void 0,owner:void 0,approver:void 0,dateRange:[],type:void 0}),a=(0,p.qj)({name:[{required:!0,message:"请输入仓库名称"}],url:[{required:!0,validator:function(e,a){return new Promise(((e,t)=>{/^user-(.*)$/.test(a)||t("需要以 user- 开头"),e()}))}}]}),{resetFields:t,validate:l,validateInfos:o}=(0,h.cI)(e,a);return{modelRef:e,validateInfos:o,validate:l,resetFields:t,handleSubmit:function(e){e.preventDefault()}}}});R.render=function(e,a,t,o,d,n){const r=(0,l.up)("a-input"),u=(0,l.up)("a-form-item"),s=(0,l.up)("a-col"),m=(0,l.up)("a-select-option"),i=(0,l.up)("a-select"),p=(0,l.up)("a-row"),f=(0,l.up)("a-range-picker"),c=(0,l.up)("a-button"),h=(0,l.up)("a-form"),R=(0,l.up)("a-card");return(0,l.wg)(),(0,l.j4)(R,{bordered:!1,title:"仓库管理"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{class:"form","scroll-to-first-error":""},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{class:"form-row",gutter:16},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{lg:6,md:12,sm:24},{default:(0,l.w5)((()=>[(0,l.Wm)(u,(0,l.dG)({label:"仓库名"},e.validateInfos.name,{"data-validate-id":"name"}),{default:(0,l.w5)((()=>[(0,l.Wm)(r,{value:e.modelRef.name,"onUpdate:value":a[1]||(a[1]=a=>e.modelRef.name=a),placeholder:"请输入仓库名称"},null,8,["value"])])),_:1},16)])),_:1}),(0,l.Wm)(s,{xl:{span:7,offset:1},lg:{span:8},md:{span:12},sm:24},{default:(0,l.w5)((()=>[(0,l.Wm)(u,(0,l.dG)({label:"仓库域名"},e.validateInfos.url,{"data-validate-id":"url"}),{default:(0,l.w5)((()=>[(0,l.Wm)(r,{value:e.modelRef.url,"onUpdate:value":a[2]||(a[2]=a=>e.modelRef.url=a),"addon-before":"http://","addon-after":".com",placeholder:"请输入"},null,8,["value"])])),_:1},16)])),_:1}),(0,l.Wm)(s,{xl:{span:9,offset:1},lg:{span:10},md:{span:24},sm:24},{default:(0,l.w5)((()=>[(0,l.Wm)(u,(0,l.dG)({label:"仓库管理员"},e.validateInfos.owner),{default:(0,l.w5)((()=>[(0,l.Wm)(i,{value:e.modelRef.owner,"onUpdate:value":a[3]||(a[3]=a=>e.modelRef.owner=a),placeholder:"请选择管理员"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{value:"王同学"},{default:(0,l.w5)((()=>[v])),_:1}),(0,l.Wm)(m,{value:"李同学"},{default:(0,l.w5)((()=>[w])),_:1}),(0,l.Wm)(m,{value:"黄同学"},{default:(0,l.w5)((()=>[k])),_:1})])),_:1},8,["value"])])),_:1},16)])),_:1})])),_:1}),(0,l.Wm)(p,{class:"form-row",gutter:16},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{lg:6,md:12,sm:24},{default:(0,l.w5)((()=>[(0,l.Wm)(u,(0,l.dG)({label:"审批人"},e.validateInfos.approver),{default:(0,l.w5)((()=>[(0,l.Wm)(i,{value:e.modelRef.approver,"onUpdate:value":a[4]||(a[4]=a=>e.modelRef.approver=a),placeholder:"请选择审批员"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{value:"王晓丽"},{default:(0,l.w5)((()=>[g])),_:1}),(0,l.Wm)(m,{value:"李军"},{default:(0,l.w5)((()=>[W])),_:1})])),_:1},8,["value"])])),_:1},16)])),_:1}),(0,l.Wm)(s,{xl:{span:7,offset:1},lg:{span:8},md:{span:12},sm:24},{default:(0,l.w5)((()=>[(0,l.Wm)(u,(0,l.dG)({label:"生效日期"},e.validateInfos.dateRange),{default:(0,l.w5)((()=>[(0,l.Wm)(f,{value:e.modelRef.dateRange,"onUpdate:value":a[5]||(a[5]=a=>e.modelRef.dateRange=a),style:{width:"100%"}},null,8,["value"])])),_:1},16)])),_:1}),(0,l.Wm)(s,{xl:{span:9,offset:1},lg:{span:10},md:{span:24},sm:24},{default:(0,l.w5)((()=>[(0,l.Wm)(u,(0,l.dG)({label:"仓库类型"},e.validateInfos.type),{default:(0,l.w5)((()=>[(0,l.Wm)(i,{value:e.modelRef.type,"onUpdate:value":a[6]||(a[6]=a=>e.modelRef.type=a),placeholder:"请选择仓库类型"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{value:"公开"},{default:(0,l.w5)((()=>[y])),_:1}),(0,l.Wm)(m,{value:"私密"},{default:(0,l.w5)((()=>[_])),_:1})])),_:1},8,["value"])])),_:1},16)])),_:1})])),_:1}),e.showSubmit?((0,l.wg)(),(0,l.j4)(u,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{onClick:e.handleSubmit},{default:(0,l.w5)((()=>[b])),_:1},8,["onClick"])])),_:1})):(0,l.ry)("",!0)])),_:1})])),_:1})};var I=R;const C=(0,l.Uk)("黄丽丽"),U=(0,l.Uk)("李大刀"),S=(0,l.Uk)("王伟"),j=(0,l.Uk)("李红军"),x=(0,l.Uk)("定时执行"),q=(0,l.Uk)("周期执行"),F=(0,l.Uk)("Submit");t(923);var G=t(70473),D=(0,l.aZ)({name:"TaskForm",props:{showSubmit:{type:Boolean,default:!1}},setup(){const e=(0,p.qj)({name2:void 0,url2:void 0,owner2:void 0,approver2:void 0,dateRange2:void 0,type2:void 0}),a=(0,p.qj)({name2:[{required:!0,message:"请输入任务名称",whitespace:!0}],url2:[{required:!0,message:"请输入任务描述",whitespace:!0}],owner2:[{required:!0,message:"请选择执行人"}],approver2:[{required:!0,message:"请选择责任人"}],dateRange2:[{required:!0,message:"请选择提醒时间",type:"object"}],type2:[{required:!0,message:"请选择任务类型"}]}),{resetFields:t,validate:l,validateInfos:o}=(0,h.cI)(e,a);return{modelRef:e,validateInfos:o,resetFields:t,validate:l,handleSubmit:function(a){a.preventDefault(),l().then((()=>{G.Z.error({message:"Received values of form:",description:(0,p.IU)(e)})}))}}}});D.render=function(e,a,t,o,d,n){const r=(0,l.up)("a-input"),u=(0,l.up)("a-form-item"),s=(0,l.up)("a-col"),m=(0,l.up)("a-select-option"),i=(0,l.up)("a-select"),p=(0,l.up)("a-row"),f=(0,l.up)("a-time-picker"),c=(0,l.up)("a-button"),v=(0,l.up)("a-form"),w=(0,l.up)("a-card");return(0,l.wg)(),(0,l.j4)(w,{bordered:!1,title:"任务管理"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{class:"task-form","scroll-to-first-error":""},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{class:"form-row",gutter:16},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{lg:6,md:12,sm:24},{default:(0,l.w5)((()=>[(0,l.Wm)(u,(0,l.dG)({label:"任务名"},e.validateInfos.name2,{"data-validate-id":"name2"}),{default:(0,l.w5)((()=>[(0,l.Wm)(r,{value:e.modelRef.name2,"onUpdate:value":a[1]||(a[1]=a=>e.modelRef.name2=a),placeholder:"请输入任务名称"},null,8,["value"])])),_:1},16)])),_:1}),(0,l.Wm)(s,{xl:{span:7,offset:1},lg:{span:8},md:{span:12},sm:24},{default:(0,l.w5)((()=>[(0,l.Wm)(u,(0,l.dG)({label:"任务描述"},e.validateInfos.url2,{"data-validate-id":"url2"}),{default:(0,l.w5)((()=>[(0,l.Wm)(r,{value:e.modelRef.url2,"onUpdate:value":a[2]||(a[2]=a=>e.modelRef.url2=a),placeholder:"请输入任务描述"},null,8,["value"])])),_:1},16)])),_:1}),(0,l.Wm)(s,{xl:{span:9,offset:1},lg:{span:10},md:{span:24},sm:24},{default:(0,l.w5)((()=>[(0,l.Wm)(u,(0,l.dG)({label:"执行人"},e.validateInfos.owner2,{"data-validate-id":"owner2"}),{default:(0,l.w5)((()=>[(0,l.Wm)(i,{value:e.modelRef.owner2,"onUpdate:value":a[3]||(a[3]=a=>e.modelRef.owner2=a),placeholder:"请选择执行人"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{value:"黄丽丽"},{default:(0,l.w5)((()=>[C])),_:1}),(0,l.Wm)(m,{value:"李大刀"},{default:(0,l.w5)((()=>[U])),_:1})])),_:1},8,["value"])])),_:1},16)])),_:1})])),_:1}),(0,l.Wm)(p,{class:"form-row",gutter:16},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{lg:6,md:12,sm:24},{default:(0,l.w5)((()=>[(0,l.Wm)(u,(0,l.dG)({label:"责任人"},e.validateInfos.approver2,{"data-validate-id":"approver2"}),{default:(0,l.w5)((()=>[(0,l.Wm)(i,{value:e.modelRef.approver2,"onUpdate:value":a[4]||(a[4]=a=>e.modelRef.approver2=a),placeholder:"请选择责任人"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{value:"王伟"},{default:(0,l.w5)((()=>[S])),_:1}),(0,l.Wm)(m,{value:"李红军"},{default:(0,l.w5)((()=>[j])),_:1})])),_:1},8,["value"])])),_:1},16)])),_:1}),(0,l.Wm)(s,{xl:{span:7,offset:1},lg:{span:8},md:{span:12},sm:24},{default:(0,l.w5)((()=>[(0,l.Wm)(u,(0,l.dG)({label:"提醒时间"},e.validateInfos.dateRange2,{"data-validate-id":"dateRange2"}),{default:(0,l.w5)((()=>[(0,l.Wm)(f,{value:e.modelRef.dateRange2,"onUpdate:value":a[5]||(a[5]=a=>e.modelRef.dateRange2=a),style:{width:"100%"}},null,8,["value"])])),_:1},16)])),_:1}),(0,l.Wm)(s,{xl:{span:9,offset:1},lg:{span:10},md:{span:24},sm:24},{default:(0,l.w5)((()=>[(0,l.Wm)(u,(0,l.dG)({label:"任务类型"},e.validateInfos.type2,{"data-validate-id":"type2"}),{default:(0,l.w5)((()=>[(0,l.Wm)(i,{modelValue:e.modelRef.type2,"onUpdate:modelValue":a[6]||(a[6]=a=>e.modelRef.type2=a),placeholder:"请选择任务类型"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{value:"定时执行"},{default:(0,l.w5)((()=>[x])),_:1}),(0,l.Wm)(m,{value:"周期执行"},{default:(0,l.w5)((()=>[q])),_:1})])),_:1},8,["modelValue"])])),_:1},16)])),_:1})])),_:1}),e.showSubmit?((0,l.wg)(),(0,l.j4)(u,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{onClick:e.handleSubmit},{default:(0,l.w5)((()=>[F])),_:1},8,["onClick"])])),_:1})):(0,l.ry)("",!0)])),_:1})])),_:1})};var Z=D;const H=(0,l.HX)("data-v-65b60d49");(0,l.dD)("data-v-65b60d49");const N={key:0},z=(0,l.Wm)("a",null,"删除",-1),L={key:1},M={key:1},T=(0,l.Wm)("a",null,"删除",-1),E=(0,l.Uk)(" 新增成员 ");(0,l.Cn)();const P=H(((e,a,t,d,n,r)=>{const u=(0,l.up)("a-input"),s=(0,l.up)("a-divider"),m=(0,l.up)("a-popconfirm"),i=(0,l.up)("a-table"),p=(0,l.up)("plus-outlined"),f=(0,l.up)("a-button"),c=(0,l.up)("a-card");return(0,l.wg)(),(0,l.j4)(c,{bordered:!1,title:"成员管理"},{default:H((()=>[(0,l.Wm)(i,{pagination:!1,columns:e.columns,"data-source":e.state.dataSource,loading:e.state.loading},(0,l.Nv)({operation:H((({record:a})=>[a.editable?((0,l.wg)(),(0,l.j4)(l.HY,{key:0},[a.isNew?((0,l.wg)(),(0,l.j4)("span",N,[(0,l.Wm)("a",{onClick:t=>e.saveRow(a)},"添加",8,["onClick"]),(0,l.Wm)(s,{type:"vertical"}),(0,l.Wm)(m,{title:"是否要删除此行？",onConfirm:t=>e.handleRemove(a.key)},{default:H((()=>[z])),_:2},1032,["onConfirm"])])):((0,l.wg)(),(0,l.j4)("span",L,[(0,l.Wm)("a",{onClick:t=>e.saveRow(a)},"保存",8,["onClick"]),(0,l.Wm)(s,{type:"vertical"}),(0,l.Wm)("a",{onClick:t=>e.handleCancel(a.key)},"取消",8,["onClick"])]))],64)):((0,l.wg)(),(0,l.j4)("span",M,[(0,l.Wm)("a",{onClick:t=>e.toggleEdit(a.key)},"编辑",8,["onClick"]),(0,l.Wm)(s,{type:"vertical"}),(0,l.Wm)(m,{title:"是否要删除此行？","ok-text":e.t("confirm.ok"),"cancel-text":e.t("confirm.cancel"),onConfirm:t=>e.handleRemove(a.key)},{default:H((()=>[T])),_:2},1032,["ok-text","cancel-text","onConfirm"])]))])),_:2},[(0,l.Ko)(["name","workId","department"],((a,t)=>({name:a,fn:H((({text:d,record:n})=>[n.editable?((0,l.wg)(),(0,l.j4)(u,{key:a,style:{margin:"-5px 0"},value:d,placeholder:e.columns[t].title,onChange:t=>e.handleChange(t.target.value,n.key,a)},null,8,["value","placeholder","onChange"])):((0,l.wg)(),(0,l.j4)(l.HY,{key:1},[(0,l.Uk)((0,o.zw)(d),1)],64))]))})))]),1032,["columns","data-source","loading"]),(0,l.Wm)(f,{style:{width:"100%","margin-top":"16px","margin-bottom":"8px"},type:"dashed",onClick:e.handleNewMember},{default:H((()=>[(0,l.Wm)(p),E])),_:1},8,["onClick"])])),_:1})}));t(71784);var O=t(61446);const V=[{title:"成员姓名",dataIndex:"name",key:"name",width:"20%",slots:{customRender:"name"}},{title:"工号",dataIndex:"workId",key:"workId",width:"20%",slots:{customRender:"workId"}},{title:"所属部门",dataIndex:"department",key:"department",width:"40%",slots:{customRender:"department"}},{title:"操作",key:"action",slots:{customRender:"operation"}}],Y=[{key:"1",name:"小明",workId:"001",editable:!1,department:"行政部"},{key:"2",name:"李莉",workId:"002",editable:!1,department:"IT部"},{key:"3",name:"王小帅",workId:"003",editable:!1,department:"财务部"}];var B=(0,l.aZ)({name:"MemberList",setup(){const{i18n:e}=(0,c.cm)(),a=(0,p.qj)({loading:!1,dataSource:Y});return{t:e,state:a,columns:V,handleSubmit:function(e){e.preventDefault()},handleNewMember:function(){const e=a.dataSource.length,t={key:0===e?"1":(parseInt(a.dataSource[e-1].key)+1).toString(),name:"",workId:"",department:"",editable:!0,isNew:!0};a.dataSource.push(t)},handleChange:function(e,t,l){const o=[...a.dataSource],d=o.find((e=>t===e.key));d&&(d[l]=e,a.dataSource=o)},toggleEdit:function(e){const t=a.dataSource.find((a=>a.key===e))||{key:"-1"};t&&(t._originalData={...t},t.editable=!t.editable)},saveRow:function(e){a.loading=!0;const{key:t,name:l,workId:o,department:d}=e;if(!l||!o||!d)return a.loading=!1,void O.Z.error("请填写完整成员信息。");new Promise((e=>{setTimeout((()=>{e({loop:!1})}),800)})).then((()=>{const e=a.dataSource.find((e=>e.key===t));e&&(e.editable=!1,e.isNew=!1,O.Z.success("保存成功。")),a.loading=!1}))},handleRemove:function(e){a.dataSource=a.dataSource.filter((a=>a.key!==e))},handleCancel:function(e){const t=a.dataSource.find((a=>a.key===e));t&&(Object.assign(t,{...t._originalData}),t._originalData=void 0)}}}});B.render=P,B.__scopeId="data-v-65b60d49";var K=B;const X={name:"仓库名",url:"仓库域名",owner:"仓库管理员",approver:"审批人",dateRange:"生效日期",type:"仓库类型",name2:"任务名",url2:"任务描述",owner2:"执行人",approver2:"责任人",dateRange2:"生效日期",type2:"任务类型"};var $=(0,l.aZ)({name:"AdvanceForm",components:{RepositoryForm:I,TaskForm:Z,MemberList:K,FooterToolbar:c.Sc},setup(){const{i18n:e}=(0,c.cm)(),a=(0,p.qj)({errors:[]}),t=(0,p.iH)(null),l=(0,p.iH)(null);return{t:e,state:a,repositoryForm:t,taskForm:l,handleErrorClick:function(e){const a=document.querySelector(`[data-validate-id=${e}]`);a&&(0,f.Z)(a,{scrollMode:"if-needed",block:"center"})},handleSubmit:async function(e){try{await Promise.all([t.value?.validate(),l.value?.validate()])}catch(e){!function(e){a.errors=Object.keys((0,p.IU)(e)).map((a=>({key:a,message:e[a].help,fieldLabel:X[a]})))}(Object.assign({},t.value?.validateInfos,l.value?.validateInfos))}}}}});$.render=i,$.__scopeId="data-v-533148cd";var A=$}}]);