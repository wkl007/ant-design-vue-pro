(self.webpackChunkant_design_vue_pro=self.webpackChunkant_design_vue_pro||[]).push([[7262],{2744:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return R}});var a=t(66252),l=t(3577),o={class:"ant-pro-table"},i={class:"ant-pro-table-search"},r=(0,a.Uk)(" 新增角色 "),u={class:"table-role-permission-card"};var d=t(13782),c=t(36571),s=(t(68309),t(2262)),m=t(51916),f=t(49963),p={style:{marginRight:"8px"}};t(34553),t(40561);var g,h=t(55518);!function(e){e.ADD="add",e.DELETE="delete",e.UPDATE="update",e.QUERY="query",e.IMPORT="import",e.EXPORT="export"}(g||(g={}));var b=(0,a.aZ)({name:"RoleModal",props:{visible:{type:Boolean,default:!1},model:{type:Object,default:function(){}}},emits:["cancel"],setup:function(){var e=(0,s.qj)({id:0,name:void 0,describe:void 0,permissions:[]}),n=(0,s.qj)({id:[{required:!0}],name:[{required:!0}]}),t=(0,s.iH)([{id:"roleManage",name:"角色管理",actions:[g.ADD,g.UPDATE]},{id:"userManage",name:"用户管理",actions:[g.ADD,g.UPDATE,g.QUERY]}]),a=(0,s.iH)([]),l=(0,h.cI)(e,n);return{tags:[{key:"add",describe:"新增"},{key:"update",describe:"修改"},{key:"delete",describe:"删除"},{key:"query",describe:"查询"},{key:"import",describe:"导入"},{key:"export",describe:"导出"}],rolePermissions:t,selectedTags:a,modelRef:e,validateInfos:l.validateInfos,resetFields:l.resetFields,handleSubmit:function(){},handleChange:function(e,n,t){if(t)e.push(n.key);else{var a=e.findIndex((function(e){return e===n.key}));e.splice(a,1)}}}}});b.render=function(e,n,t,o,i,r){var u=(0,a.up)("a-input"),d=(0,a.up)("a-form-item"),c=(0,a.up)("a-checkable-tag"),s=(0,a.up)("a-form"),m=(0,a.up)("a-modal");return(0,a.wg)(),(0,a.j4)(m,{title:"权限编辑",visible:e.visible,width:600,centered:"",onOk:e.handleSubmit,onCancel:n[2]||(n[2]=function(){e.resetFields(),e.$emit("cancel")})},{default:(0,a.w5)((function(){return[(0,a.Wm)(s,{layout:"vertical"},{default:(0,a.w5)((function(){return[(0,a.wy)((0,a.Wm)(d,(0,a.dG)({label:"唯一编号"},e.validateInfos.id),{default:(0,a.w5)((function(){return[(0,a.Wm)(u,{value:e.modelRef.id,disabled:"",placeholder:"唯一编号"},null,8,["value"])]})),_:1},16),[[f.F8,e.modelRef.id>0]]),(0,a.Wm)(d,(0,a.dG)({label:"角色名称"},e.validateInfos.name),{default:(0,a.w5)((function(){return[(0,a.Wm)(u,{value:e.modelRef.name,"onUpdate:value":n[1]||(n[1]=function(n){return e.modelRef.name=n}),placeholder:"角色名称"},null,8,["value"])]})),_:1},16),(0,a.Wm)(d,{label:"角色权限表"},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(e.rolePermissions,(function(n){return(0,a.wg)(),(0,a.j4)("p",{key:n.id,style:{"margin-left":"12px"}},[(0,a.Wm)("span",p,(0,l.zw)(n.name)+":",1),((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(e.tags,(function(t){return(0,a.wg)(),(0,a.j4)(c,{key:t.key,checked:n.actions.indexOf(t.key)>-1,onChange:function(a){return e.handleChange(n.actions,t,a)}},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,l.zw)(t.describe),1)]})),_:2},1032,["checked","onChange"])})),128))])})),128))]})),_:1})]})),_:1})]})),_:1},8,["visible","onOk"])};var v=b,w=t(31696),k=t(44863),y=[{align:"center",title:"编号",dataIndex:"id"},{align:"center",title:"角色名称",dataIndex:"name"},{align:"center",title:"描述",dataIndex:"describe"},{align:"center",title:"操作",dataIndex:"action",slots:{customRender:"action"}}],C=(0,a.aZ)({name:"RoleList",components:{TableToolbar:m.fj,RoleModal:v},setup:function(){var e=(0,s.qj)({roleModal:(0,s.iH)(),visible:!1,currentData:{}}),n=(0,w.yW)(y,{checkAll:!0,needRowIndex:!1}),t=n.state,l=n.dynamicColumns,o=n.dynamicColumnItems,i=n.handleColumnAllClick,r=n.handleColumnChange,u=n.reset,m=n.move,f=(0,w.O9)(),p=(0,c.Z)(f,3),g=p[0],h=p[1],b=p[2],v=b.setFull,C=b.exitFull,R=(0,w.$5)(k.Z.getRoles,{current:1,pageSize:10,tableSize:"middle"}),W=R.context,_=R.reload,x=R.setPageInfo;return(0,d.Z)((0,d.Z)({},(0,s.BK)(e)),{},{state:W,columnState:t,dynamicColumns:l,dynamicColumnItems:o,elRef:g,screenState:h,setFull:v,exitFull:C,reset:u,move:m,handleTableChange:function(e,n){var t=e.current,a=e.pageSize;x((0,d.Z)({current:t,pageSize:a},n)),_()},handleColumnChange:r,handleColumnAllClick:i,handleReload:function(){x({current:1,pageSize:10}),_()},handleModalVisible:function(n,t){e.visible=n,e.currentData=t,n&&t.id&&(0,a.Y3)((function(){e.roleModal.modelRef.id=t.id,e.roleModal.modelRef.name=t.name,e.roleModal.modelRef.describe=t.describe,e.roleModal.modelRef.permissions=t.permissions}))}})}});C.render=function(e,n,t,d,c,s){var m=(0,a.up)("a-input"),f=(0,a.up)("a-form-item"),p=(0,a.up)("a-col"),g=(0,a.up)("a-row"),h=(0,a.up)("a-form"),b=(0,a.up)("plus-outlined"),v=(0,a.up)("a-button"),w=(0,a.up)("table-toolbar"),k=(0,a.up)("a-tag"),y=(0,a.up)("a-table"),C=(0,a.up)("a-card"),R=(0,a.up)("role-modal"),W=(0,a.up)("page-container");return(0,a.wg)(),(0,a.j4)(W,null,{default:(0,a.w5)((function(){return[(0,a.Wm)("div",o,[(0,a.Wm)("div",i,[(0,a.Wm)(h,{layout:"horizontal"},{default:(0,a.w5)((function(){return[(0,a.Wm)(g,{gutter:16,type:"flex",justfy:"start"},{default:(0,a.w5)((function(){return[(0,a.Wm)(p,{xs:24,sm:24,md:12},{default:(0,a.w5)((function(){return[(0,a.Wm)(f,{label:"角色名称"},{default:(0,a.w5)((function(){return[(0,a.Wm)(m,{placeholder:"角色名称"})]})),_:1})]})),_:1}),(0,a.Wm)(p,{xs:24,sm:24,md:12},{default:(0,a.w5)((function(){return[(0,a.Wm)(f,{label:"描述"},{default:(0,a.w5)((function(){return[(0,a.Wm)(m,{placeholder:"描述"})]})),_:1})]})),_:1})]})),_:1})]})),_:1})]),(0,a.Wm)(C,{"body-style":{padding:0},ref:"elRef"},{default:(0,a.w5)((function(){return[(0,a.Wm)(w,{title:"角色列表","screen-state":e.screenState,indeterminate:e.columnState.indeterminate,"column-items":e.dynamicColumnItems,"table-size":e.state.tableSize,"onUpdate:table-size":n[2]||(n[2]=function(n){return e.state.tableSize=n}),"check-all":e.columnState.checkAll,"onUpdate:check-all":n[3]||(n[3]=function(n){return e.columnState.checkAll=n}),onReload:e.handleReload,onReset:e.reset,onSetFull:e.setFull,onExitFull:e.exitFull,onChange:e.handleColumnChange,onChangeAll:e.handleColumnAllClick,onMove:e.move},{action:(0,a.w5)((function(){return[(0,a.Wm)(v,{type:"primary",onClick:n[1]||(n[1]=function(n){return e.handleModalVisible(!0,{})})},{default:(0,a.w5)((function(){return[(0,a.Wm)(b),r]})),_:1})]})),_:1},8,["screen-state","indeterminate","column-items","table-size","check-all","onReload","onReset","onSetFull","onExitFull","onChange","onChangeAll","onMove"]),(0,a.Wm)(y,{"row-key":"id",size:e.state.tableSize,loading:e.state.loading,columns:e.dynamicColumns,"data-source":e.state.dataSource,pagination:{current:e.state.current,pageSize:e.state.pageSize,total:e.state.total},onChange:e.handleTableChange},{expandedRowRender:(0,a.w5)((function(e){var n=e.record;return[(0,a.Wm)("div",u,[(0,a.Wm)(g,{gutter:12},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(n.permissions,(function(e){return(0,a.wg)(),(0,a.j4)(p,{style:{height:"48px"},span:12,key:e.id},{default:(0,a.w5)((function(){return[(0,a.Wm)(g,{gutter:16},{default:(0,a.w5)((function(){return[(0,a.Wm)(p,{span:4},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,l.zw)(e.label),1)]})),_:2},1024),(0,a.Wm)(p,null,{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(e.actions,(function(e){return(0,a.wg)(),(0,a.j4)(k,{color:"cyan",key:e},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,l.zw)(e),1)]})),_:2},1024)})),128))]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:2},1024)])]})),action:(0,a.w5)((function(n){var t=n.record;return[(0,a.Wm)("a",{href:"javascript:;",onClick:function(n){return e.handleModalVisible(!0,t)}}," 编辑 ",8,["onClick"])]})),_:1},8,["size","loading","columns","data-source","pagination","onChange"])]})),_:1},512)]),(0,a.Wm)(R,{ref:"roleModal",model:e.currentData,visible:e.visible,onCancel:n[4]||(n[4]=function(n){return e.handleModalVisible(!1,e.currentData)})},null,8,["model","visible"])]})),_:1})};var R=C}}]);