(self.webpackChunkant_design_vue_pro=self.webpackChunkant_design_vue_pro||[]).push([[2517],{55518:function(e,t,r){"use strict";r.d(t,{cI:function(){return O}});var n=r(2262),a=r(66252),l=r(42151),o=r(86192),u=r(41597),i=r(60665),f=r(72563),c=r(4827),s=r(76273),d=Math.min;var m=function(e,t,r){for(var n=r?f.Z:i.Z,a=e[0].length,l=e.length,m=l,p=Array(l),v=1/0,b=[];m--;){var h=e[m];m&&t&&(h=(0,o.Z)(h,(0,c.Z)(t))),v=d(h.length,v),p[m]=!r&&(t||a>=120&&h.length>=120)?new u.Z(m&&h):void 0}h=e[0];var g=-1,w=p[0];e:for(;++g<a&&b.length<v;){var F=h[g],y=t?t(F):F;if(F=r||0!==F?F:0,!(w?(0,s.Z)(w,y):n(b,y,r))){for(m=l;--m;){var W=p[m];if(!(W?(0,s.Z)(W,y):n(e[m],y,r)))continue e}w&&w.push(y),b.push(F)}}return b},p=r(8901),v=r(34096);var b=function(e){return(0,v.Z)(e)?e:[]},h=(0,p.Z)((function(e){var t=(0,o.Z)(e,b);return t.length&&t[0]===e[0]?m(t):[]})),g=r(65741),w=r(16152),F=r(77186),y=r(18688),W=r(30144),k=r(57493);function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){R(e,t,r[t])}))}return e}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function j(e){var t=!1;return e&&e.length&&e.every((function(e){return!e.required||(t=!0,!1)})),t}function Z(e){return null==e?[]:Array.isArray(e)?e:[e]}function q(e,t,r){for(var n=e,a=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),l=0,o=a.length;l<o-1&&(n||r);++l){var u=a[l];if(!(u in n)){if(r)throw new Error("please transfer a valid name path to validate!");break}n=n[u]}return{o:n,k:a[l],v:n?n[a[l]]:null,isValid:n&&a[l]in n}}var O=function(e,t,r){var o=(0,l.Z)(e),u={};Object.keys(t).forEach((function(e){u[e]={autoLink:!1,required:j(t[e])}})),u=(0,n.qj)(u);var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.length?e.filter((function(e){var r=Z(e.trigger||"change");return h(r,t).length})):e},f=null,c=function(e,t,r,n){var a=(0,y.N)([e],t,r,_({validateMessages:W.y},n),!!n.validateFirst);return u[e].validateStatus="validating",a.catch((function(e){return e})).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];"validating"===u[e].validateStatus&&(u[e].validateStatus=t.length?"error":"success",u[e].help=t[0])})),a},s=function(r,n){var a=[],l=!0;r?a=Array.isArray(r)?r:[r]:(l=!1,a=Object.keys(t));var o=function(r){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,l=[],o={},u=function(u){var f=r[u],s=q(e,f,a);if(!s.isValid)return"continue";o[f]=s.v;var d=i(t[f],Z(n&&n.trigger));d.length&&l.push(c(f,s.v,d,n||{}).then((function(){return{name:f,errors:[]}})).catch((function(e){return Promise.reject({name:f,errors:e})})))},s=0;s<r.length;s++)u(s);var d=(0,k.v)(l);f=d;var m=d.then((function(){return f===d?Promise.resolve(o):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:o,errorFields:t,outOfDate:f!==d})}));return m.catch((function(e){return e})),m}(a,n||{},l);return o.catch((function(e){return e})),o},d=o,m=function(e){var r=[];Object.keys(t).forEach((function(t){var n=q(e,t,!1),a=q(d,t,!1);(0,g.Z)(n.v,a.v)||r.push(t)})),s(r,{trigger:"change"}),d=(0,l.Z)(e)},p=null==r?void 0:r.debounce;return(0,a.YP)(e,p&&p.wait?(0,w.Z)(m,p.wait,(0,F.Z)(p,["wait"])):m,{immediate:r&&!!r.immediate,deep:!0}),(0,a.YP)(t,(function(){r&&r.validateOnRuleChange&&s()}),{deep:!0}),{modelRef:e,rulesRef:t,initialModel:o,validateInfos:u,resetFields:function(r){U(e,_({},(0,l.Z)(o),r)),(0,a.Y3)((function(){Object.keys(u).forEach((function(e){u[e]={autoLink:!1,required:j(t[e])}}))}))},validate:s,validateField:c,mergeValidateInfo:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={autoLink:!1},r=[],n=Array.isArray(e)?e:[e],a=0;a<n.length;a++){var l=n[a];"error"===(null==l?void 0:l.validateStatus)&&(t.validateStatus="error",l.help&&r.push(l.help)),t.required=t.required||(null==l?void 0:l.required)}return t.help=r.join("\n"),t},clearValidate:function(e){(e?Array.isArray(e)?e:[e]:Object.keys(t)).forEach((function(e){u[e]&&U(u[e],{validateStatus:"",help:""})}))}}};r(91033)},72316:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var n=r(66252),a=r(3577),l={class:"optional"},o={class:"optional"},u={class:"optional"};r(71784);var i=r(61446),f=r(37171),c=(r(35666),r(2262)),s=r(30381),d=r.n(s),m=r(42119),p=r(55518),v=r(51916),b=r(81278),h=r(95107),g=r(80707),w=function(){function e(){(0,b.Z)(this,e)}return(0,h.Z)(e,null,[{key:"saveBasicFormData",value:function(e){return g.Z.request({url:"/forms/basic-form",method:"post",data:e})}},{key:"saveFormData",value:function(e){return g.Z.request({url:"/forms",method:"post",data:e})}}]),e}(),F=(0,n.aZ)({name:"BaseForm",setup:function(){var e=(0,m.yj)(),t=(0,v.cm)().i18n,r=(0,c.qj)({submitting:!1}),n=(0,c.qj)({title:void 0,date:[],goal:void 0,standard:void 0,client:void 0,invites:void 0,weight:null,public:"1",publicUsers:[]}),a=(0,c.qj)({title:[{required:!0,message:function(){return t("form.baseForm.title.required")}}],date:[{required:!0,message:function(){return t("form.baseForm.date.required")},type:"array"}],goal:[{required:!0,message:function(){return t("form.baseForm.goal.required")}}],standard:[{required:!0,message:function(){return t("form.baseForm.standard.required")}}]}),l=(0,p.cI)(n,a),o=l.resetFields,u=l.validate,s=l.validateInfos;function b(){return(b=(0,f.Z)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),r.submitting=!0,e.next=5,u();case 5:return e.next=7,w.saveBasicFormData({title:n.title,date:[d()(n.date[0]).format("YYYY-MM-DD hh:mm:ss"),d()(n.date[1]).format("YYYY-MM-DD hh:mm:ss")],goal:n.goal,standard:n.standard});case 7:e.sent,r.submitting=!1,i.Z.success("提交成功"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),r.submitting=!1;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}return{t:t,route:e,state:r,labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}},modelRef:n,validateInfos:s,handleSubmit:function(e){return b.apply(this,arguments)},resetFields:o}}});F.render=function(e,t,r,i,f,c){var s=(0,n.up)("a-input"),d=(0,n.up)("a-form-item"),m=(0,n.up)("a-range-picker"),p=(0,n.up)("a-textarea"),v=(0,n.up)("info-circle-outlined"),b=(0,n.up)("a-tooltip"),h=(0,n.up)("a-radio"),g=(0,n.up)("a-radio-group"),w=(0,n.up)("a-select-option"),F=(0,n.up)("a-select"),y=(0,n.up)("a-button"),W=(0,n.up)("a-space"),k=(0,n.up)("a-form"),_=(0,n.up)("a-card"),R=(0,n.up)("page-container");return(0,n.wg)(),(0,n.j4)(R,{title:e.t("".concat(e.route.meta.title))},{content:(0,n.w5)((function(){return[(0,n.Uk)((0,a.zw)(e.t("form.baseForm.basic.description")),1)]})),default:(0,n.w5)((function(){return[(0,n.Wm)(_,{bordered:!1},{default:(0,n.w5)((function(){return[(0,n.Wm)(k,{"label-col":e.labelCol,"wrapper-col":e.wrapperCol},{default:(0,n.w5)((function(){return[(0,n.Wm)(d,(0,n.dG)({label:e.t("form.baseForm.title.label")},e.validateInfos.title),{default:(0,n.w5)((function(){return[(0,n.Wm)(s,{value:e.modelRef.title,"onUpdate:value":t[1]||(t[1]=function(t){return e.modelRef.title=t}),placeholder:e.t("form.baseForm.title.placeholder")},null,8,["value","placeholder"])]})),_:1},16,["label"]),(0,n.Wm)(d,(0,n.dG)({label:e.t("form.baseForm.date.label")},e.validateInfos.date),{default:(0,n.w5)((function(){return[(0,n.Wm)(m,{value:e.modelRef.date,"onUpdate:value":t[2]||(t[2]=function(t){return e.modelRef.date=t}),placeholder:[e.t("form.baseForm.placeholder.start"),e.t("form.baseForm.placeholder.end")],style:{width:"100%"}},null,8,["value","placeholder"])]})),_:1},16,["label"]),(0,n.Wm)(d,(0,n.dG)({label:e.t("form.baseForm.goal.label")},e.validateInfos.goal),{default:(0,n.w5)((function(){return[(0,n.Wm)(p,{value:e.modelRef.goal,"onUpdate:value":t[3]||(t[3]=function(t){return e.modelRef.goal=t}),placeholder:e.t("form.baseForm.goal.placeholder"),style:{minHeight:32},rows:4},null,8,["value","placeholder"])]})),_:1},16,["label"]),(0,n.Wm)(d,(0,n.dG)({label:e.t("form.baseForm.standard.label")},e.validateInfos.standard),{default:(0,n.w5)((function(){return[(0,n.Wm)(p,{value:e.modelRef.standard,"onUpdate:value":t[4]||(t[4]=function(t){return e.modelRef.standard=t}),placeholder:e.t("form.baseForm.standard.placeholder"),style:{minHeight:32},rows:4},null,8,["value","placeholder"])]})),_:1},16,["label"]),(0,n.Wm)(d,e.validateInfos.client,{label:(0,n.w5)((function(){return[(0,n.Wm)("span",null,(0,a.zw)(e.t("form.baseForm.client.label")),1),(0,n.Wm)("em",l,[(0,n.Uk)((0,a.zw)(e.t("form.baseForm.form.optional"))+" ",1),(0,n.Wm)(b,{title:e.t("form.baseForm.label.tooltip")},{default:(0,n.w5)((function(){return[(0,n.Wm)(v)]})),_:1},8,["title"])])]})),default:(0,n.w5)((function(){return[(0,n.Wm)(s,{value:e.modelRef.client,"onUpdate:value":t[5]||(t[5]=function(t){return e.modelRef.client=t}),placeholder:e.t("form.baseForm.client.placeholder")},null,8,["value","placeholder"])]})),_:1},16),(0,n.Wm)(d,e.validateInfos.invites,{label:(0,n.w5)((function(){return[(0,n.Wm)("span",null,(0,a.zw)(e.t("form.baseForm.invites.label")),1),(0,n.Wm)("em",o,(0,a.zw)(e.t("form.baseForm.form.optional")),1)]})),default:(0,n.w5)((function(){return[(0,n.Wm)(s,{value:e.modelRef.invites,"onUpdate:value":t[6]||(t[6]=function(t){return e.modelRef.invites=t}),placeholder:e.t("form.baseForm.invites.placeholder")},null,8,["value","placeholder"])]})),_:1},16),(0,n.Wm)(d,e.validateInfos.weight,{label:(0,n.w5)((function(){return[(0,n.Wm)("span",null,(0,a.zw)(e.t("form.baseForm.weight.label")),1),(0,n.Wm)("em",u,(0,a.zw)(e.t("form.baseForm.form.optional")),1)]})),default:(0,n.w5)((function(){return[(0,n.Wm)(s,{modelValue:e.modelRef.weight,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.modelRef.weight=t}),placeholder:e.t("form.baseForm.weight.placeholder")},null,8,["modelValue","placeholder"])]})),_:1},16),(0,n.Wm)(d,(0,n.dG)({label:e.t("form.baseForm.public.label")},e.validateInfos.public),{default:(0,n.w5)((function(){return[(0,n.Wm)("div",null,[(0,n.Wm)(g,{value:e.modelRef.public,"onUpdate:value":t[8]||(t[8]=function(t){return e.modelRef.public=t})},{default:(0,n.w5)((function(){return[(0,n.Wm)(h,{value:"1"},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,a.zw)(e.t("form.baseForm.radio.public")),1)]})),_:1}),(0,n.Wm)(h,{value:"2"},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,a.zw)(e.t("form.baseForm.radio.partially-public")),1)]})),_:1}),(0,n.Wm)(h,{value:"3"},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,a.zw)(e.t("form.baseForm.radio.private")),1)]})),_:1})]})),_:1},8,["value"]),(0,n.Wm)(d,(0,n.dG)({style:{marginBottom:0}},e.validateInfos.publicUsers),{default:(0,n.w5)((function(){return[(0,n.Wm)("div",{style:{margin:"8px 0",display:"2"===e.modelRef.public?"block":"none"}},[(0,n.Wm)(F,{value:e.modelRef.publicUsers,"onUpdate:value":t[9]||(t[9]=function(t){return e.modelRef.publicUsers=t}),mode:"multiple",placeholder:e.t("form.baseForm.publicUsers.placeholder")},{default:(0,n.w5)((function(){return[(0,n.Wm)(w,{value:"1"},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,a.zw)(e.t("form.baseForm.option.A")),1)]})),_:1}),(0,n.Wm)(w,{value:"2"},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,a.zw)(e.t("form.baseForm.option.B")),1)]})),_:1}),(0,n.Wm)(w,{value:"3"},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,a.zw)(e.t("form.baseForm.option.C")),1)]})),_:1})]})),_:1},8,["value","placeholder"]),(0,n.Wm)("span",null,(0,a.zw)(e.t("form.baseForm.label.help")),1)],4)]})),_:1},16)])]})),_:1},16,["label"]),(0,n.Wm)(d,(0,n.dG)({wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}},{style:{marginTop:32}}),{default:(0,n.w5)((function(){return[(0,n.Wm)(W,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(y,{type:"primary",loading:e.state.submitting,onClick:e.handleSubmit},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,a.zw)(e.t("form.baseForm.form.submit")),1)]})),_:1},8,["loading","onClick"]),(0,n.Wm)(y,null,{default:(0,n.w5)((function(){return[(0,n.Uk)((0,a.zw)(e.t("form.baseForm.form.save")),1)]})),_:1})]})),_:1})]})),_:1},16)]})),_:1},8,["label-col","wrapper-col"])]})),_:1})]})),_:1},8,["title"])};var y=F}}]);