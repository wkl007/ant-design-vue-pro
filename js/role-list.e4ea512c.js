(self.webpackChunkant_design_vue_pro=self.webpackChunkant_design_vue_pro||[]).push([[2474],{2744:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return y}});var t=l(66252),n=l(56612);const o={class:"ant-pro-table"},i={class:"ant-pro-table-search"},d=(0,t.Uk)(" 新增角色 "),s={class:"table-role-permission-card"};var r=l(44854),u=l(71596),c=l(49117);const m={style:{marginRight:"8px"}};var p,f=l(55518);!function(e){e.ADD="add",e.DELETE="delete",e.UPDATE="update",e.QUERY="query",e.IMPORT="import",e.EXPORT="export"}(p||(p={}));var g=(0,t.aZ)({name:"RoleModal",props:{visible:{type:Boolean,default:!1},model:{type:Object,default:()=>{}}},emits:["cancel"],setup(){const e=(0,r.qj)({id:0,name:void 0,describe:void 0,permissions:[]}),a=(0,r.qj)({id:[{required:!0}],name:[{required:!0}]}),l=(0,r.iH)([{id:"roleManage",name:"角色管理",actions:[p.ADD,p.UPDATE]},{id:"userManage",name:"用户管理",actions:[p.ADD,p.UPDATE,p.QUERY]}]),t=(0,r.iH)([]),{validateInfos:n,resetFields:o}=(0,f.cI)(e,a);return{tags:[{key:"add",describe:"新增"},{key:"update",describe:"修改"},{key:"delete",describe:"删除"},{key:"query",describe:"查询"},{key:"import",describe:"导入"},{key:"export",describe:"导出"}],rolePermissions:l,selectedTags:t,modelRef:e,validateInfos:n,resetFields:o,handleSubmit:function(){},handleChange:function(e,a,l){if(l)e.push(a.key);else{const l=e.findIndex((e=>e===a.key));e.splice(l,1)}}}}});g.render=function(e,a,l,o,i,d){const s=(0,t.up)("a-input"),r=(0,t.up)("a-form-item"),u=(0,t.up)("a-checkable-tag"),p=(0,t.up)("a-form"),f=(0,t.up)("a-modal");return(0,t.wg)(),(0,t.j4)(f,{title:"权限编辑",visible:e.visible,width:600,centered:"",onOk:e.handleSubmit,onCancel:a[2]||(a[2]=()=>{e.resetFields(),e.$emit("cancel")})},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{layout:"vertical"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(r,(0,t.dG)({label:"唯一编号"},e.validateInfos.id),{default:(0,t.w5)((()=>[(0,t.Wm)(s,{value:e.modelRef.id,disabled:"",placeholder:"唯一编号"},null,8,["value"])])),_:1},16),[[c.F8,e.modelRef.id>0]]),(0,t.Wm)(r,(0,t.dG)({label:"角色名称"},e.validateInfos.name),{default:(0,t.w5)((()=>[(0,t.Wm)(s,{value:e.modelRef.name,"onUpdate:value":a[1]||(a[1]=a=>e.modelRef.name=a),placeholder:"角色名称"},null,8,["value"])])),_:1},16),(0,t.Wm)(r,{label:"角色权限表"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.j4)(t.HY,null,(0,t.Ko)(e.rolePermissions,(a=>((0,t.wg)(),(0,t.j4)("p",{key:a.id,style:{"margin-left":"12px"}},[(0,t.Wm)("span",m,(0,n.zw)(a.name)+":",1),((0,t.wg)(!0),(0,t.j4)(t.HY,null,(0,t.Ko)(e.tags,(l=>((0,t.wg)(),(0,t.j4)(u,{key:l.key,checked:a.actions.indexOf(l.key)>-1,onChange:t=>e.handleChange(a.actions,l,t)},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(l.describe),1)])),_:2},1032,["checked","onChange"])))),128))])))),128))])),_:1})])),_:1})])),_:1},8,["visible","onOk"])};var h=g,b=l(31696),w=l(44863);const k=[{align:"center",title:"编号",dataIndex:"id"},{align:"center",title:"角色名称",dataIndex:"name"},{align:"center",title:"描述",dataIndex:"describe"},{align:"center",title:"操作",dataIndex:"action",slots:{customRender:"action"}}];var v=(0,t.aZ)({name:"RoleList",components:{TableToolbar:u.fj,RoleModal:h},setup(){const e=(0,r.qj)({roleModal:(0,r.iH)(),visible:!1,currentData:{}}),{state:a,dynamicColumns:l,dynamicColumnItems:n,handleColumnAllClick:o,handleColumnChange:i,reset:d,move:s}=(0,b.yW)(k,{checkAll:!0,needRowIndex:!1}),[u,c,{setFull:m,exitFull:p}]=(0,b.O9)(),{context:f,reload:g,setPageInfo:h}=(0,b.$5)(w.Z.getRoles,{current:1,pageSize:10,tableSize:"middle"});return{...(0,r.BK)(e),state:f,columnState:a,dynamicColumns:l,dynamicColumnItems:n,elRef:u,screenState:c,setFull:m,exitFull:p,reset:d,move:s,handleTableChange:function({current:e,pageSize:a},l){h({current:e,pageSize:a,...l}),g()},handleColumnChange:i,handleColumnAllClick:o,handleReload:function(){h({current:1,pageSize:10}),g()},handleModalVisible:function(a,l){e.visible=a,e.currentData=l,a&&l.id&&(0,t.Y3)((()=>{e.roleModal.modelRef.id=l.id,e.roleModal.modelRef.name=l.name,e.roleModal.modelRef.describe=l.describe,e.roleModal.modelRef.permissions=l.permissions}))}}}});v.render=function(e,a,l,r,u,c){const m=(0,t.up)("a-input"),p=(0,t.up)("a-form-item"),f=(0,t.up)("a-col"),g=(0,t.up)("a-row"),h=(0,t.up)("a-form"),b=(0,t.up)("plus-outlined"),w=(0,t.up)("a-button"),k=(0,t.up)("table-toolbar"),v=(0,t.up)("a-tag"),y=(0,t.up)("a-table"),C=(0,t.up)("a-card"),R=(0,t.up)("role-modal"),W=(0,t.up)("page-container");return(0,t.wg)(),(0,t.j4)(W,null,{default:(0,t.w5)((()=>[(0,t.Wm)("div",o,[(0,t.Wm)("div",i,[(0,t.Wm)(h,{layout:"horizontal"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{gutter:16,type:"flex",justfy:"start"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{xs:24,sm:24,md:12},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{label:"角色名称"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{placeholder:"角色名称"})])),_:1})])),_:1}),(0,t.Wm)(f,{xs:24,sm:24,md:12},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{label:"描述"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{placeholder:"描述"})])),_:1})])),_:1})])),_:1})])),_:1})]),(0,t.Wm)(C,{"body-style":{padding:0},ref:"elRef"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{title:"角色列表","screen-state":e.screenState,indeterminate:e.columnState.indeterminate,"column-items":e.dynamicColumnItems,"table-size":e.state.tableSize,"onUpdate:table-size":a[2]||(a[2]=a=>e.state.tableSize=a),"check-all":e.columnState.checkAll,"onUpdate:check-all":a[3]||(a[3]=a=>e.columnState.checkAll=a),onReload:e.handleReload,onReset:e.reset,onSetFull:e.setFull,onExitFull:e.exitFull,onChange:e.handleColumnChange,onChangeAll:e.handleColumnAllClick,onMove:e.move},{action:(0,t.w5)((()=>[(0,t.Wm)(w,{type:"primary",onClick:a[1]||(a[1]=a=>e.handleModalVisible(!0,{}))},{default:(0,t.w5)((()=>[(0,t.Wm)(b),d])),_:1})])),_:1},8,["screen-state","indeterminate","column-items","table-size","check-all","onReload","onReset","onSetFull","onExitFull","onChange","onChangeAll","onMove"]),(0,t.Wm)(y,{"row-key":"id",size:e.state.tableSize,loading:e.state.loading,columns:e.dynamicColumns,"data-source":e.state.dataSource,pagination:{current:e.state.current,pageSize:e.state.pageSize,total:e.state.total},onChange:e.handleTableChange},{expandedRowRender:(0,t.w5)((({record:e})=>[(0,t.Wm)("div",s,[(0,t.Wm)(g,{gutter:12},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.j4)(t.HY,null,(0,t.Ko)(e.permissions,(e=>((0,t.wg)(),(0,t.j4)(f,{style:{height:"48px"},span:12,key:e.id},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{gutter:16},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{span:4},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.label),1)])),_:2},1024),(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.j4)(t.HY,null,(0,t.Ko)(e.actions,(e=>((0,t.wg)(),(0,t.j4)(v,{color:"cyan",key:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e),1)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])])),action:(0,t.w5)((({record:a})=>[(0,t.Wm)("a",{href:"javascript:;",onClick:l=>e.handleModalVisible(!0,a)}," 编辑 ",8,["onClick"])])),_:1},8,["size","loading","columns","data-source","pagination","onChange"])])),_:1},512)]),(0,t.Wm)(R,{ref:"roleModal",model:e.currentData,visible:e.visible,onCancel:a[4]||(a[4]=a=>e.handleModalVisible(!1,e.currentData))},null,8,["model","visible"])])),_:1})};var y=v}}]);