(self.webpackChunkant_design_vue_pro=self.webpackChunkant_design_vue_pro||[]).push([[4535],{55518:function(e,t,r){"use strict";r.d(t,{cI:function(){return U}});var n=r(2262),a=r(66252),u=r(42151),i=r(86192),o=r(41597),l=r(60665),c=r(72563),s=r(4827),f=r(76273),d=Math.min;var v=function(e,t,r){for(var n=r?c.Z:l.Z,a=e[0].length,u=e.length,v=u,m=Array(u),p=1/0,g=[];v--;){var h=e[v];v&&t&&(h=(0,i.Z)(h,(0,s.Z)(t))),p=d(h.length,p),m[v]=!r&&(t||a>=120&&h.length>=120)?new o.Z(v&&h):void 0}h=e[0];var y=-1,b=m[0];e:for(;++y<a&&g.length<p;){var k=h[y],W=t?t(k):k;if(k=r||0!==k?k:0,!(b?(0,f.Z)(b,W):n(g,W,r))){for(v=u;--v;){var w=m[v];if(!(w?(0,f.Z)(w,W):n(e[v],W,r)))continue e}b&&b.push(W),g.push(k)}}return g},m=r(8901),p=r(34096);var g=function(e){return(0,p.Z)(e)?e:[]},h=(0,m.Z)((function(e){var t=(0,i.Z)(e,g);return t.length&&t[0]===e[0]?v(t):[]})),y=r(65741),b=r(16152),k=r(77186),W=r(18688),w=r(30144),Z=r(57493);function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){j(e,t,r[t])}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function O(e){var t=!1;return e&&e.length&&e.every((function(e){return!e.required||(t=!0,!1)})),t}function q(e){return null==e?[]:Array.isArray(e)?e:[e]}function I(e,t,r){for(var n=e,a=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),u=0,i=a.length;u<i-1&&(n||r);++u){var o=a[u];if(!(o in n)){if(r)throw new Error("please transfer a valid name path to validate!");break}n=n[o]}return{o:n,k:a[u],v:n?n[a[u]]:null,isValid:n&&a[u]in n}}var U=function(e,t,r){var i=(0,u.Z)(e),o={};Object.keys(t).forEach((function(e){o[e]={autoLink:!1,required:O(t[e])}})),o=(0,n.qj)(o);var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.length?e.filter((function(e){var r=q(e.trigger||"change");return h(r,t).length})):e},c=null,s=function(e,t,r,n){var a=(0,W.N)([e],t,r,_({validateMessages:w.y},n),!!n.validateFirst);return o[e].validateStatus="validating",a.catch((function(e){return e})).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];"validating"===o[e].validateStatus&&(o[e].validateStatus=t.length?"error":"success",o[e].help=t[0])})),a},f=function(r,n){var a=[],u=!0;r?a=Array.isArray(r)?r:[r]:(u=!1,a=Object.keys(t));var i=function(r){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,u=[],i={},o=function(o){var c=r[o],f=I(e,c,a);if(!f.isValid)return"continue";i[c]=f.v;var d=l(t[c],q(n&&n.trigger));d.length&&u.push(s(c,f.v,d,n||{}).then((function(){return{name:c,errors:[]}})).catch((function(e){return Promise.reject({name:c,errors:e})})))},f=0;f<r.length;f++)o(f);var d=(0,Z.v)(u);c=d;var v=d.then((function(){return c===d?Promise.resolve(i):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:i,errorFields:t,outOfDate:c!==d})}));return v.catch((function(e){return e})),v}(a,n||{},u);return i.catch((function(e){return e})),i},d=i,v=function(e){var r=[];Object.keys(t).forEach((function(t){var n=I(e,t,!1),a=I(d,t,!1);(0,y.Z)(n.v,a.v)||r.push(t)})),f(r,{trigger:"change"}),d=(0,u.Z)(e)},m=null==r?void 0:r.debounce;return(0,a.YP)(e,m&&m.wait?(0,b.Z)(v,m.wait,(0,k.Z)(m,["wait"])):v,{immediate:r&&!!r.immediate,deep:!0}),(0,a.YP)(t,(function(){r&&r.validateOnRuleChange&&f()}),{deep:!0}),{modelRef:e,rulesRef:t,initialModel:i,validateInfos:o,resetFields:function(r){x(e,_({},(0,u.Z)(i),r)),(0,a.Y3)((function(){Object.keys(o).forEach((function(e){o[e]={autoLink:!1,required:O(t[e])}}))}))},validate:f,validateField:s,mergeValidateInfo:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={autoLink:!1},r=[],n=Array.isArray(e)?e:[e],a=0;a<n.length;a++){var u=n[a];"error"===(null==u?void 0:u.validateStatus)&&(t.validateStatus="error",u.help&&r.push(u.help)),t.required=t.required||(null==u?void 0:u.required)}return t.help=r.join("\n"),t},clearValidate:function(e){(e?Array.isArray(e)?e:[e]:Object.keys(t)).forEach((function(e){o[e]&&x(o[e],{validateStatus:"",help:""})}))}}};r(91033)},13796:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(81278),a=r(95107),u=r(80707),i=function(){function e(){(0,n.Z)(this,e)}return(0,a.Z)(e,null,[{key:"login",value:function(e){return u.Z.request({url:"/login/account",method:"post",data:e})}},{key:"getUserInfo",value:function(){return u.Z.request({url:"/currentUser",method:"get"})}},{key:"logout",value:function(){return u.Z.request({url:"/logout",method:"post"})}},{key:"register",value:function(e){return u.Z.request({url:"/register",method:"post",data:e})}}]),e}()},89813:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var n=r(66252),a=(0,n.HX)("data-v-2143c238");(0,n.dD)("data-v-2143c238");var u={class:"main login"},i=(0,n.Uk)(" 获取验证码 "),o=(0,n.Uk)(" 自动登录 "),l=(0,n.Uk)(" 忘记密码 "),c=(0,n.Uk)(" 登录 "),s={class:"user-login-other"},f=(0,n.Wm)("span",null,"其他登录方式",-1),d=(0,n.Uk)(" 注册账户 ");(0,n.Cn)();var v=a((function(e,t,r,v,m,p){var g=(0,n.up)("a-alert"),h=(0,n.up)("user-outlined"),y=(0,n.up)("a-input"),b=(0,n.up)("a-form-item"),k=(0,n.up)("lock-outlined"),W=(0,n.up)("a-input-password"),w=(0,n.up)("a-tab-pane"),Z=(0,n.up)("mobile-outlined"),_=(0,n.up)("mail-outlined"),j=(0,n.up)("a-col"),x=(0,n.up)("a-button"),O=(0,n.up)("a-row"),q=(0,n.up)("a-tabs"),I=(0,n.up)("a-checkbox"),U=(0,n.up)("router-link"),S=(0,n.up)("alipay-circle-outlined"),C=(0,n.up)("taobao-circle-outlined"),A=(0,n.up)("weibo-circle-outlined"),P=(0,n.up)("a-form");return(0,n.wg)(),(0,n.j4)("div",u,[(0,n.Wm)(P,{layout:"vertical",model:e.form,onSubmit:e.handleSubmit},{default:a((function(){return[(0,n.Wm)(q,{"active-key":e.activeKey,"tab-bar-style":{textAlign:"center",borderBottom:"unset"},onChange:e.handleTabClick},{default:a((function(){return[(0,n.Wm)(w,{key:0,tab:"账号密码登录"},{default:a((function(){return[e.isLoginError?((0,n.wg)(),(0,n.j4)(g,{key:0,type:"error","show-icon":"",style:{"margin-bottom":"24px"},message:"账户或密码错误"})):(0,n.ry)("",!0),(0,n.Wm)(b,e.validateInfos.username,{default:a((function(){return[(0,n.Wm)(y,{size:"large",value:e.form.username,"onUpdate:value":t[1]||(t[1]=function(t){return e.form.username=t}),placeholder:"账户: admin"},{prefix:a((function(){return[(0,n.Wm)(h,{style:{color:"rgba(0,0,0,.25)"}},null,8,["style"])]})),_:1},8,["value"])]})),_:1},16),(0,n.Wm)(b,e.validateInfos.password,{default:a((function(){return[(0,n.Wm)(W,{size:"large",value:e.form.password,"onUpdate:value":t[2]||(t[2]=function(t){return e.form.password=t}),placeholder:"密码: admin or ant.design"},{prefix:a((function(){return[(0,n.Wm)(k,{style:{color:"rgba(0,0,0,.25)"}},null,8,["style"])]})),_:1},8,["value"])]})),_:1},16)]})),_:1}),(0,n.Wm)(w,{key:1,tab:"手机号登录"},{default:a((function(){return[(0,n.Wm)(b,e.validateInfos.mobile,{default:a((function(){return[(0,n.Wm)(y,{size:"large",value:e.form.mobile,"onUpdate:value":t[3]||(t[3]=function(t){return e.form.mobile=t}),placeholder:"手机号"},{prefix:a((function(){return[(0,n.Wm)(Z,{style:{color:"rgba(0,0,0,.25)"}},null,8,["style"])]})),_:1},8,["value"])]})),_:1},16),(0,n.Wm)(O,{gutter:16},{default:a((function(){return[(0,n.Wm)(j,{span:16},{default:a((function(){return[(0,n.Wm)(b,e.validateInfos.captcha,{default:a((function(){return[(0,n.Wm)(y,{size:"large",value:e.form.captcha,"onUpdate:value":t[4]||(t[4]=function(t){return e.form.captcha=t}),placeholder:"验证码"},{prefix:a((function(){return[(0,n.Wm)(_,{style:{color:"rgba(0,0,0,.25)"}},null,8,["style"])]})),_:1},8,["value"])]})),_:1},16)]})),_:1}),(0,n.Wm)(j,{span:8},{default:a((function(){return[(0,n.Wm)(x,{size:"large",block:"",onClick:e.getCaptcha},{default:a((function(){return[i]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["active-key","onChange"]),(0,n.Wm)(b,null,{default:a((function(){return[(0,n.Wm)(I,{checked:e.form.rememberMe,"onUpdate:checked":t[5]||(t[5]=function(t){return e.form.rememberMe=t})},{default:a((function(){return[o]})),_:1},8,["checked"]),(0,n.Wm)(U,{to:"/user/login",class:"forge-password",style:{float:"right"}},{default:a((function(){return[l]})),_:1})]})),_:1}),(0,n.Wm)(b,{style:{"margin-top":"24px"}},{default:a((function(){return[(0,n.Wm)(x,{size:"large",type:"primary",loading:e.loading,"html-type":"submit",block:""},{default:a((function(){return[c]})),_:1},8,["loading"])]})),_:1}),(0,n.Wm)("div",s,[f,(0,n.Wm)("a",null,[(0,n.Wm)(S,{class:"item-icon"})]),(0,n.Wm)("a",null,[(0,n.Wm)(C,{class:"item-icon"})]),(0,n.Wm)("a",null,[(0,n.Wm)(A,{class:"item-icon"})]),(0,n.Wm)(U,{class:"register",to:"/user/register"},{default:a((function(){return[d]})),_:1})])]})),_:1},8,["model","onSubmit"])])})),m=r(13782),p=r(37171),g=(r(68309),r(35666),r(2262)),h=r(80894),y=r(42119),b=r(55518),k=r(13796),W=(0,n.aZ)({name:"login",setup:function(){var e=(0,h.oR)(),t=(0,y.tv)(),r=(0,g.qj)({activeKey:0,loading:!1,isLoginError:!1}),n=(0,g.qj)({rememberMe:!0,username:"",password:"",mobile:"",captcha:""}),a=(0,g.qj)({rememberMe:void 0,username:[{required:!0,message:"请输入帐户名"}],password:[{required:!0,message:"请输入密码"}],mobile:[{required:!0,pattern:/^1[34578]\d{9}$/,message:"请输入正确的手机号"}],captcha:[{required:!0,message:"请输入验证码"}]}),u=(0,b.cI)(n,a),i=u.validateInfos,o=u.validate,l=u.resetFields;function c(){return(c=(0,p.Z)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),e.next=4,o("mobile");case 4:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function s(){return(s=(0,p.Z)(regeneratorRuntime.mark((function n(a){var u,i,l,c,s,f,d,v,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r.loading=!0,a.preventDefault(),u=0===r.activeKey?["username","password"]:["mobile","captcha"],n.next=6,o(u);case 6:return(i=n.sent).type=0===r.activeKey?"account":"telephone",n.next=10,k.Z.login(i);case 10:return l=n.sent,c=l.token,n.next=14,k.Z.getUserInfo();case 14:return s=n.sent,f=s.name,d=s.userid,v=s.avatar,n.next=18,e.dispatch("setLoginStatus",1);case 18:return n.next=20,e.dispatch("setAccessToken",c);case 20:return m={username:d,nickname:f,avatar:v,extra:s},n.next=23,e.dispatch("setUserInfo",m);case 23:return n.next=25,t.push({path:"/"});case 25:r.loading=!1,n.next=31;break;case 28:n.prev=28,n.t0=n.catch(0),r.loading=!1;case 31:case"end":return n.stop()}}),n,null,[[0,28]])})))).apply(this,arguments)}return(0,m.Z)((0,m.Z)({},(0,g.BK)(r)),{},{form:n,validateInfos:i,handleTabClick:function(e){r.activeKey=e,l()},getCaptcha:function(e){return c.apply(this,arguments)},handleSubmit:function(e){return s.apply(this,arguments)}})}});W.render=v,W.__scopeId="data-v-2143c238";var w=W}}]);