(self.webpackChunkant_design_vue_pro=self.webpackChunkant_design_vue_pro||[]).push([[685],{13796:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});var r=t(80707);class s{static login(e){return r.Z.request({url:"/login/account",method:"post",data:e})}static getUserInfo(){return r.Z.request({url:"/currentUser",method:"get"})}static logout(){return r.Z.request({url:"/logout",method:"post"})}static register(e){return r.Z.request({url:"/register",method:"post",data:e})}}},8397:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return Z}});var r=t(66252),s=t(56612);const l=(0,r.HX)("data-v-39e1223d");(0,r.dD)("data-v-39e1223d");const o={class:"main register"},n=(0,r.Wm)("h3",null,"注册",-1),i={style:{width:"240px"}},u=(0,r.Wm)("div",{style:{"margin-top":"10px"}},[(0,r.Wm)("span",null,"请至少输入 6 个字符。建议输入字母、数字、特殊字符组合。")],-1),d=(0,r.Uk)("+86"),m=(0,r.Uk)("+87"),p=(0,r.Uk)(" 注册 "),c=(0,r.Uk)(" 使用已有账户登录 ");(0,r.Cn)();const f=l(((e,a,t,f,v,g)=>{const w=(0,r.up)("a-input"),h=(0,r.up)("a-form-item"),W=(0,r.up)("a-progress"),_=(0,r.up)("a-input-password"),b=(0,r.up)("a-popover"),k=(0,r.up)("a-select-option"),C=(0,r.up)("a-select"),y=(0,r.up)("mail-outlined"),L=(0,r.up)("a-col"),q=(0,r.up)("a-button"),Z=(0,r.up)("a-row"),I=(0,r.up)("router-link"),U=(0,r.up)("a-form");return(0,r.wg)(),(0,r.j4)("div",o,[n,(0,r.Wm)(U,{layout:"vertical",model:e.form,onSubmit:e.handleSubmit},{default:l((()=>[(0,r.Wm)(h,e.validateInfos.email,{default:l((()=>[(0,r.Wm)(w,{size:"large",placeholder:"邮箱",value:e.form.email,"onUpdate:value":a[1]||(a[1]=a=>e.form.email=a)},null,8,["value"])])),_:1},16),(0,r.Wm)(b,{placement:"rightTop",trigger:"focus","get-popup-container":e=>e.parentElement,visible:e.passwordLevelChecked,"onUpdate:visible":a[4]||(a[4]=a=>e.passwordLevelChecked=a)},{content:l((()=>[(0,r.Wm)("div",i,[(0,r.Wm)("div",{class:e.passwordLevelClass}," 强度："+(0,s.zw)(e.passwordLevelName),3),(0,r.Wm)(W,{percent:e.percent,"show-info":!1,"stroke-color":e.passwordLevelColor},null,8,["percent","stroke-color"]),u])])),default:l((()=>[(0,r.Wm)(h,e.validateInfos.password,{default:l((()=>[(0,r.Wm)(_,{size:"large",placeholder:"至少6位密码，区分大小写",value:e.form.password,"onUpdate:value":a[2]||(a[2]=a=>e.form.password=a),onFocus:a[3]||(a[3]=a=>e.passwordLevelChecked=!0)},null,8,["value"])])),_:1},16)])),_:1},8,["get-popup-container","visible"]),(0,r.Wm)(h,e.validateInfos.confirmPassword,{default:l((()=>[(0,r.Wm)(_,{size:"large",placeholder:"确认密码",value:e.form.confirmPassword,"onUpdate:value":a[5]||(a[5]=a=>e.form.confirmPassword=a)},null,8,["value"])])),_:1},16),(0,r.Wm)(h,e.validateInfos.mobile,{default:l((()=>[(0,r.Wm)(w,{size:"large",placeholder:"11 位手机号",value:e.form.mobile,"onUpdate:value":a[6]||(a[6]=a=>e.form.mobile=a)},{addonBefore:l((()=>[(0,r.Wm)(C,{size:"large","default-value":"+86"},{default:l((()=>[(0,r.Wm)(k,{value:"+86"},{default:l((()=>[d])),_:1}),(0,r.Wm)(k,{value:"+87"},{default:l((()=>[m])),_:1})])),_:1})])),_:1},8,["value"])])),_:1},16),(0,r.Wm)(Z,{gutter:16},{default:l((()=>[(0,r.Wm)(L,{span:16},{default:l((()=>[(0,r.Wm)(h,e.validateInfos.captcha,{default:l((()=>[(0,r.Wm)(w,{size:"large",placeholder:"验证码",value:e.form.captcha,"onUpdate:value":a[7]||(a[7]=a=>e.form.captcha=a)},{prefix:l((()=>[(0,r.Wm)(y,{class:"prefix-icon"})])),_:1},8,["value"])])),_:1},16)])),_:1}),(0,r.Wm)(L,{span:8},{default:l((()=>[(0,r.Wm)(q,{size:"large",block:"",onClick:e.getCaptcha},{default:l((()=>[(0,r.Uk)((0,s.zw)(e.smsSendBtn?`${e.time} s`:"获取验证码"),1)])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,r.Wm)(h,null,{default:l((()=>[(0,r.Wm)(q,{size:"large",type:"primary",loading:e.registerBtn,disabled:e.registerBtn,"html-type":"submit",style:{width:"50%"}},{default:l((()=>[p])),_:1},8,["loading","disabled"]),(0,r.Wm)(I,{class:"login",to:"/user/login",style:{float:"right","line-height":"40px"}},{default:l((()=>[c])),_:1})])),_:1})])),_:1},8,["model","onSubmit"])])}));t(923);var v=t(70473),g=(t(71784),t(61446)),w=t(44854),h=t(55518),W=t(42119),_=t(13796),b=t(80707);const k={0:"低",1:"低",2:"中",3:"强"},C={0:"error",1:"error",2:"warning",3:"success"},y={0:"#ff0000",1:"#ff0000",2:"#ff7e05",3:"#52c41a"};let L;var q=(0,r.aZ)({name:"Register",setup(){const e=(0,W.tv)(),a=(0,w.qj)({time:60,smsSendBtn:!1,passwordLevel:0,passwordLevelChecked:!1,percent:10,progressColor:"#FF0000",registerBtn:!1}),t=(0,w.qj)({email:"",password:"",confirmPassword:"",mobile:"",captcha:""}),s=(0,w.qj)({email:[{required:!0,type:"email",message:"请输入邮箱地址"}],password:[{required:!0,message:"至少6位密码，区分大小写"},{validator:(e,t)=>new Promise(((e,r)=>{let s=0;/[0-9]/.test(t)&&s++,/[a-zA-Z]/.test(t)&&s++,/[^0-9a-zA-Z_]/.test(t)&&s++,a.passwordLevel=s,a.percent=30*s,s>=2?(s>=3&&(a.percent=100),e(null)):(0===s&&(a.percent=10),r(new Error("密码强度不够")))}))}],confirmPassword:[{required:!0,message:"至少6位密码，区分大小写"},{validator:(e,a)=>new Promise(((e,r)=>{const s=t.password;a||r(new Error("请输入密码")),a&&s&&a.trim()!==s.trim()&&r(new Error("两次密码不一致")),e(null)}))}],mobile:[{required:!0,message:"请输入正确的手机号",pattern:/^1[3456789]\d{9}$/}],captcha:[{required:!0,message:"请输入验证码"}]}),{validateInfos:l,validate:o}=(0,h.cI)(t,s);return{...(0,w.BK)(a),form:t,validateInfos:l,passwordLevelClass:(0,r.Fl)((()=>C[a.passwordLevel])),passwordLevelName:(0,r.Fl)((()=>k[a.passwordLevel])),passwordLevelColor:(0,r.Fl)((()=>y[a.passwordLevel])),getCaptcha:async function(e){try{e.preventDefault();const{mobile:t}=await o("mobile");L=setInterval((()=>{a.time--<=0&&(a.time=60,a.smsSendBtn=!1,clearInterval(L))}),1e3);const r=g.Z.loading("验证码发送中...",0),{captcha:s}=await class{static getSmsCaptcha(e){return b.Z.request({url:"/message/sms",method:"get",params:e})}}.getSmsCaptcha({mobile:t});setTimeout(r,3e3),v.Z.success({message:"提示",description:`验证码获取成功，您的验证码为：${s}`,duration:8})}catch(e){g.Z.destroy(),clearInterval(L),a.time=60,a.smsSendBtn=!1}},handleSubmit:async function(t){try{t.preventDefault(),a.registerBtn=!0;const r=await o(),{data:{email:s}}=await _.Z.register(r);g.Z.info("注册成功"),await e.push({path:"/user/registerResult",query:{email:s}})}catch(t){a.registerBtn=!1}}}}});q.render=f,q.__scopeId="data-v-39e1223d";var Z=q}}]);