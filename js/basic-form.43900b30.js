(self.webpackChunkant_design_vue_pro=self.webpackChunkant_design_vue_pro||[]).push([[9816],{55518:function(e,a,t){"use strict";t.d(a,{cI:function(){return O}});var r=t(44854),l=t(66252),o=t(42151),n=t(80758),i=t(41597),u=t(60665),s=t(72563),d=t(4827),m=t(76273),f=Math.min;var c=function(e,a,t){for(var r=t?s.Z:u.Z,l=e[0].length,o=e.length,c=o,p=Array(o),v=1/0,b=[];c--;){var h=e[c];c&&a&&(h=(0,n.Z)(h,(0,d.Z)(a))),v=f(h.length,v),p[c]=!t&&(a||l>=120&&h.length>=120)?new i.Z(c&&h):void 0}h=e[0];var g=-1,w=p[0];e:for(;++g<l&&b.length<v;){var F=h[g],y=a?a(F):F;if(F=t||0!==F?F:0,!(w?(0,m.Z)(w,y):r(b,y,t))){for(c=o;--c;){var W=p[c];if(!(W?(0,m.Z)(W,y):r(e[c],y,t)))continue e}w&&w.push(y),b.push(F)}}return b},p=t(8901),v=t(34096);var b=function(e){return(0,v.Z)(e)?e:[]},h=(0,p.Z)((function(e){var a=(0,n.Z)(e,b);return a.length&&a[0]===e[0]?c(a):[]})),g=t(65741),w=t(16152),F=t(77186),y=t(18688),W=t(30144),_=t(57493);function k(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?Object(arguments[a]):{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(a){U(e,a,t[a])}))}return e}function U(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function j(){return(j=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function R(e){var a=!1;return e&&e.length&&e.every((function(e){return!e.required||(a=!0,!1)})),a}function q(e){return null==e?[]:Array.isArray(e)?e:[e]}(0,t(86236).bc)("","success","warning","error","validating");function Z(e,a,t){for(var r=e,l=(a=(a=a.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),o=0,n=l.length;o<n-1&&(r||t);++o){var i=l[o];if(!(i in r)){if(t)throw new Error("please transfer a valid name path to validate!");break}r=r[i]}return{o:r,k:l[o],v:r?r[l[o]]:null,isValid:r&&l[o]in r}}var O=function(e,a,t){var n=(0,o.Z)(e),i={};Object.keys(a).forEach((function(e){i[e]={autoLink:!1,required:R(a[e])}})),i=(0,r.qj)(i);var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;return a.length?e.filter((function(e){var t=q(e.trigger||"change");return h(t,a).length})):e},s=null,d=function(e,a,t,r){var l=(0,y.N)([e],a,t,k({validateMessages:W.y},r),!!r.validateFirst);return i[e].validateStatus="validating",l.catch((function(e){return e})).then((function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];"validating"===i[e].validateStatus&&(i[e].validateStatus=a.length?"error":"success",i[e].help=a[0])})),l},m=function(t,r){var l=[],o=!0;t?l=Array.isArray(t)?t:[t]:(o=!1,l=Object.keys(a));var n=function(t){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0,o=[],n={},i=function(i){var s=t[i],m=Z(e,s,l);if(!m.isValid)return"continue";n[s]=m.v;var f=u(a[s],q(r&&r.trigger));f.length&&o.push(d(s,m.v,f,r||{}).then((function(){return{name:s,errors:[]}})).catch((function(e){return Promise.reject({name:s,errors:e})})))},m=0;m<t.length;m++)i(m);var f=(0,_.v)(o);s=f;var c=f.then((function(){return s===f?Promise.resolve(n):Promise.reject([])})).catch((function(e){var a=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:n,errorFields:a,outOfDate:s!==f})}));return c.catch((function(e){return e})),c}(l,r||{},o);return n.catch((function(e){return e})),n},f=n,c=function(e){var t=[];Object.keys(a).forEach((function(a){var r=Z(e,a,!1),l=Z(f,a,!1);(0,g.Z)(r.v,l.v)||t.push(a)})),m(t,{trigger:"change"}),f=(0,o.Z)(e)},p=null==t?void 0:t.debounce;return(0,l.YP)(e,p&&p.wait?(0,w.Z)(c,p.wait,(0,F.Z)(p,["wait"])):c,{immediate:t&&!!t.immediate,deep:!0}),(0,l.YP)(a,(function(){t&&t.validateOnRuleChange&&m()}),{deep:!0}),{modelRef:e,rulesRef:a,initialModel:n,validateInfos:i,resetFields:function(t){j(e,k({},(0,o.Z)(n),t)),(0,l.Y3)((function(){Object.keys(i).forEach((function(e){i[e]={autoLink:!1,required:R(a[e])}}))}))},validate:m,validateField:d,mergeValidateInfo:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a={autoLink:!1},t=[],r=Array.isArray(e)?e:[e],l=0;l<r.length;l++){var o=r[l];"error"===(null==o?void 0:o.validateStatus)&&(a.validateStatus="error",o.help&&t.push(o.help)),a.required=a.required||(null==o?void 0:o.required)}return a.help=t.join("\n"),a},clearValidate:function(e){(e?Array.isArray(e)?e:[e]:Object.keys(a)).forEach((function(e){i[e]&&j(i[e],{validateStatus:"",help:""})}))}}};t(91033)},72316:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return h}});var r=t(66252),l=t(56612);const o={class:"optional"},n={class:"optional"},i={class:"optional"};t(71784);var u=t(61446),s=t(44854),d=t(30381),m=t.n(d),f=t(42119),c=t(55518),p=t(71596),v=t(80707);var b=(0,r.aZ)({name:"BaseForm",setup(){const e=(0,f.yj)(),{i18n:a}=(0,p.cm)(),t=(0,s.qj)({submitting:!1}),r=(0,s.qj)({title:void 0,date:[],goal:void 0,standard:void 0,client:void 0,invites:void 0,weight:null,public:"1",publicUsers:[]}),l=(0,s.qj)({title:[{required:!0,message:()=>a("form.baseForm.title.required")}],date:[{required:!0,message:()=>a("form.baseForm.date.required"),type:"array"}],goal:[{required:!0,message:()=>a("form.baseForm.goal.required")}],standard:[{required:!0,message:()=>a("form.baseForm.standard.required")}]}),{resetFields:o,validate:n,validateInfos:i}=(0,c.cI)(r,l);return{t:a,route:e,state:t,labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}},modelRef:r,validateInfos:i,handleSubmit:async function(e){try{e.preventDefault(),t.submitting=!0,await n();await class{static saveBasicFormData(e){return v.Z.request({url:"/forms/basic-form",method:"post",data:e})}static saveFormData(e){return v.Z.request({url:"/forms",method:"post",data:e})}}.saveBasicFormData({title:r.title,date:[m()(r.date[0]).format("YYYY-MM-DD hh:mm:ss"),m()(r.date[1]).format("YYYY-MM-DD hh:mm:ss")],goal:r.goal,standard:r.standard});t.submitting=!1,u.Z.success("提交成功")}catch(e){t.submitting=!1}},resetFields:o}}});b.render=function(e,a,t,u,s,d){const m=(0,r.up)("a-input"),f=(0,r.up)("a-form-item"),c=(0,r.up)("a-range-picker"),p=(0,r.up)("a-textarea"),v=(0,r.up)("info-circle-outlined"),b=(0,r.up)("a-tooltip"),h=(0,r.up)("a-radio"),g=(0,r.up)("a-radio-group"),w=(0,r.up)("a-select-option"),F=(0,r.up)("a-select"),y=(0,r.up)("a-button"),W=(0,r.up)("a-space"),_=(0,r.up)("a-form"),k=(0,r.up)("a-card"),U=(0,r.up)("page-container");return(0,r.wg)(),(0,r.j4)(U,{title:e.t(`${e.route.meta.title}`)},{content:(0,r.w5)((()=>[(0,r.Uk)((0,l.zw)(e.t("form.baseForm.basic.description")),1)])),default:(0,r.w5)((()=>[(0,r.Wm)(k,{bordered:!1},{default:(0,r.w5)((()=>[(0,r.Wm)(_,{"label-col":e.labelCol,"wrapper-col":e.wrapperCol},{default:(0,r.w5)((()=>[(0,r.Wm)(f,(0,r.dG)({label:e.t("form.baseForm.title.label")},e.validateInfos.title),{default:(0,r.w5)((()=>[(0,r.Wm)(m,{value:e.modelRef.title,"onUpdate:value":a[1]||(a[1]=a=>e.modelRef.title=a),placeholder:e.t("form.baseForm.title.placeholder")},null,8,["value","placeholder"])])),_:1},16,["label"]),(0,r.Wm)(f,(0,r.dG)({label:e.t("form.baseForm.date.label")},e.validateInfos.date),{default:(0,r.w5)((()=>[(0,r.Wm)(c,{value:e.modelRef.date,"onUpdate:value":a[2]||(a[2]=a=>e.modelRef.date=a),placeholder:[e.t("form.baseForm.placeholder.start"),e.t("form.baseForm.placeholder.end")],style:{width:"100%"}},null,8,["value","placeholder"])])),_:1},16,["label"]),(0,r.Wm)(f,(0,r.dG)({label:e.t("form.baseForm.goal.label")},e.validateInfos.goal),{default:(0,r.w5)((()=>[(0,r.Wm)(p,{value:e.modelRef.goal,"onUpdate:value":a[3]||(a[3]=a=>e.modelRef.goal=a),placeholder:e.t("form.baseForm.goal.placeholder"),style:{minHeight:32},rows:4},null,8,["value","placeholder"])])),_:1},16,["label"]),(0,r.Wm)(f,(0,r.dG)({label:e.t("form.baseForm.standard.label")},e.validateInfos.standard),{default:(0,r.w5)((()=>[(0,r.Wm)(p,{value:e.modelRef.standard,"onUpdate:value":a[4]||(a[4]=a=>e.modelRef.standard=a),placeholder:e.t("form.baseForm.standard.placeholder"),style:{minHeight:32},rows:4},null,8,["value","placeholder"])])),_:1},16,["label"]),(0,r.Wm)(f,e.validateInfos.client,{label:(0,r.w5)((()=>[(0,r.Wm)("span",null,(0,l.zw)(e.t("form.baseForm.client.label")),1),(0,r.Wm)("em",o,[(0,r.Uk)((0,l.zw)(e.t("form.baseForm.form.optional"))+" ",1),(0,r.Wm)(b,{title:e.t("form.baseForm.label.tooltip")},{default:(0,r.w5)((()=>[(0,r.Wm)(v)])),_:1},8,["title"])])])),default:(0,r.w5)((()=>[(0,r.Wm)(m,{value:e.modelRef.client,"onUpdate:value":a[5]||(a[5]=a=>e.modelRef.client=a),placeholder:e.t("form.baseForm.client.placeholder")},null,8,["value","placeholder"])])),_:1},16),(0,r.Wm)(f,e.validateInfos.invites,{label:(0,r.w5)((()=>[(0,r.Wm)("span",null,(0,l.zw)(e.t("form.baseForm.invites.label")),1),(0,r.Wm)("em",n,(0,l.zw)(e.t("form.baseForm.form.optional")),1)])),default:(0,r.w5)((()=>[(0,r.Wm)(m,{value:e.modelRef.invites,"onUpdate:value":a[6]||(a[6]=a=>e.modelRef.invites=a),placeholder:e.t("form.baseForm.invites.placeholder")},null,8,["value","placeholder"])])),_:1},16),(0,r.Wm)(f,e.validateInfos.weight,{label:(0,r.w5)((()=>[(0,r.Wm)("span",null,(0,l.zw)(e.t("form.baseForm.weight.label")),1),(0,r.Wm)("em",i,(0,l.zw)(e.t("form.baseForm.form.optional")),1)])),default:(0,r.w5)((()=>[(0,r.Wm)(m,{modelValue:e.modelRef.weight,"onUpdate:modelValue":a[7]||(a[7]=a=>e.modelRef.weight=a),placeholder:e.t("form.baseForm.weight.placeholder")},null,8,["modelValue","placeholder"])])),_:1},16),(0,r.Wm)(f,(0,r.dG)({label:e.t("form.baseForm.public.label")},e.validateInfos.public),{default:(0,r.w5)((()=>[(0,r.Wm)("div",null,[(0,r.Wm)(g,{value:e.modelRef.public,"onUpdate:value":a[8]||(a[8]=a=>e.modelRef.public=a)},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{value:"1"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,l.zw)(e.t("form.baseForm.radio.public")),1)])),_:1}),(0,r.Wm)(h,{value:"2"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,l.zw)(e.t("form.baseForm.radio.partially-public")),1)])),_:1}),(0,r.Wm)(h,{value:"3"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,l.zw)(e.t("form.baseForm.radio.private")),1)])),_:1})])),_:1},8,["value"]),(0,r.Wm)(f,(0,r.dG)({style:{marginBottom:0}},e.validateInfos.publicUsers),{default:(0,r.w5)((()=>[(0,r.Wm)("div",{style:{margin:"8px 0",display:"2"===e.modelRef.public?"block":"none"}},[(0,r.Wm)(F,{value:e.modelRef.publicUsers,"onUpdate:value":a[9]||(a[9]=a=>e.modelRef.publicUsers=a),mode:"multiple",placeholder:e.t("form.baseForm.publicUsers.placeholder")},{default:(0,r.w5)((()=>[(0,r.Wm)(w,{value:"1"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,l.zw)(e.t("form.baseForm.option.A")),1)])),_:1}),(0,r.Wm)(w,{value:"2"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,l.zw)(e.t("form.baseForm.option.B")),1)])),_:1}),(0,r.Wm)(w,{value:"3"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,l.zw)(e.t("form.baseForm.option.C")),1)])),_:1})])),_:1},8,["value","placeholder"]),(0,r.Wm)("span",null,(0,l.zw)(e.t("form.baseForm.label.help")),1)],4)])),_:1},16)])])),_:1},16,["label"]),(0,r.Wm)(f,(0,r.dG)({wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}},{style:{marginTop:32}}),{default:(0,r.w5)((()=>[(0,r.Wm)(W,null,{default:(0,r.w5)((()=>[(0,r.Wm)(y,{type:"primary",loading:e.state.submitting,onClick:e.handleSubmit},{default:(0,r.w5)((()=>[(0,r.Uk)((0,l.zw)(e.t("form.baseForm.form.submit")),1)])),_:1},8,["loading","onClick"]),(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,l.zw)(e.t("form.baseForm.form.save")),1)])),_:1})])),_:1})])),_:1},16)])),_:1},8,["label-col","wrapper-col"])])),_:1})])),_:1},8,["title"])};var h=b}}]);