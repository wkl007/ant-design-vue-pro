(self.webpackChunkant_design_vue_pro=self.webpackChunkant_design_vue_pro||[]).push([[685],{70473:function(e,t,a){"use strict";var o=a(74380),n=a(66252),s=a(98376),r=a(72185),l=a(63765),i=a(32548),c=a(9293),u=a(79751),d={},p=4.5,m="24px",f="24px",v="topRight",g=function(){return document.body},w=null;function h(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;switch(e){case"topLeft":t={left:"0px",top:a,bottom:"auto"};break;case"topRight":t={right:"0px",top:a,bottom:"auto"};break;case"bottomLeft":t={left:"0px",top:"auto",bottom:o};break;default:t={right:"0px",top:"auto",bottom:o}}return t}var b={success:r.Z,info:l.Z,error:i.Z,warning:c.Z};var W={open:function(e){var t=e.icon,a=e.type,o=e.description,r=e.message,l=e.btn,i=e.prefixCls||"ant-notification",c="".concat(i,"-notice"),m=void 0===e.duration?p:e.duration,f=null;if(t)f=function(){return(0,n.Wm)("span",{class:"".concat(c,"-icon")},[t])};else if(a){var W=b[a];f=function(){return(0,n.Wm)(W,{class:"".concat(c,"-icon ").concat(c,"-icon-").concat(a)},null)}}!function(e,t){var a=e.prefixCls,o=e.placement,r=void 0===o?v:o,l=e.getContainer,i=void 0===l?g:l,c=e.top,p=e.bottom,m=e.closeIcon,f=void 0===m?w:m,b="".concat(a,"-").concat(r);d[b]?t(d[b]):s.Z.newInstance({prefixCls:a,class:"".concat(a,"-").concat(r),style:h(r,c,p),getContainer:i,closeIcon:function(){return(0,n.Wm)("span",{class:"".concat(a,"-close-x")},[f||(0,n.Wm)(u.Z,{class:"".concat(a,"-close-icon")},null)])}},(function(e){d[b]=e,t(e)}))}({prefixCls:i,placement:e.placement,top:e.top,bottom:e.bottom,getContainer:e.getContainer,closeIcon:e.closeIcon},(function(t){t.notice({content:function(){return(0,n.Wm)("div",{class:f?"".concat(c,"-with-icon"):""},[f&&f(),(0,n.Wm)("div",{class:"".concat(c,"-message")},[!o&&f?(0,n.Wm)("span",{class:"".concat(c,"-message-single-line-auto-margin")},null):null,r]),(0,n.Wm)("div",{class:"".concat(c,"-description")},[o]),l?(0,n.Wm)("span",{class:"".concat(c,"-btn")},[l]):null])},duration:m,closable:!0,onClose:e.onClose,onClick:e.onClick,key:e.key,style:e.style||{},class:e.class})}))},close:function(e){Object.keys(d).forEach((function(t){return d[t].removeNotice(e)}))},config:function(e){var t=e.duration,a=e.placement,o=e.bottom,n=e.top,s=e.getContainer,r=e.closeIcon;void 0!==t&&(p=t),void 0!==a&&(v=a),void 0!==o&&(f="number"==typeof o?"".concat(o,"px"):o),void 0!==n&&(m="number"==typeof n?"".concat(n,"px"):n),void 0!==s&&(g=s),void 0!==r&&(w=r)},destroy:function(){Object.keys(d).forEach((function(e){d[e].destroy(),delete d[e]}))}};["success","info","warning","error"].forEach((function(e){W[e]=function(t){return W.open((0,o.Z)((0,o.Z)({},t),{type:e}))}})),W.warn=W.warning,t.Z=W},923:function(e,t,a){"use strict";a(85900)},13796:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var o=a(80707);class n{static login(e){return o.Z.request({url:"/login/account",method:"post",data:e})}static getUserInfo(){return o.Z.request({url:"/currentUser",method:"get"})}static logout(){return o.Z.request({url:"/logout",method:"post"})}static register(e){return o.Z.request({url:"/register",method:"post",data:e})}}},56766:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return I}});var o=a(66252),n=a(3577);const s=(0,o.HX)("data-v-eac5fbf2");(0,o.dD)("data-v-eac5fbf2");const r={class:"main register"},l=(0,o.Wm)("h3",null,"注册",-1),i={style:{width:"240px"}},c=(0,o.Wm)("div",{style:{"margin-top":"10px"}},[(0,o.Wm)("span",null,"请至少输入 6 个字符。建议输入字母、数字、特殊字符组合。")],-1),u=(0,o.Uk)("+86"),d=(0,o.Uk)("+87"),p=(0,o.Uk)(" 注册 "),m=(0,o.Uk)(" 使用已有账户登录 ");(0,o.Cn)();const f=s(((e,t,a,f,v,g)=>{const w=(0,o.up)("a-input"),h=(0,o.up)("a-form-item"),b=(0,o.up)("a-progress"),W=(0,o.up)("a-input-password"),C=(0,o.up)("a-popover"),y=(0,o.up)("a-select-option"),k=(0,o.up)("a-select"),_=(0,o.up)("mail-outlined"),Z=(0,o.up)("a-col"),x=(0,o.up)("a-button"),I=(0,o.up)("a-row"),L=(0,o.up)("router-link"),q=(0,o.up)("a-form");return(0,o.wg)(),(0,o.j4)("div",r,[l,(0,o.Wm)(q,{layout:"vertical",model:e.form,onSubmit:e.handleSubmit},{default:s((()=>[(0,o.Wm)(h,e.validateInfos.email,{default:s((()=>[(0,o.Wm)(w,{size:"large",placeholder:"邮箱",value:e.form.email,"onUpdate:value":t[1]||(t[1]=t=>e.form.email=t)},null,8,["value"])])),_:1},16),(0,o.Wm)(C,{placement:"rightTop",trigger:"focus","get-popup-container":e=>e.parentElement,visible:e.passwordLevelChecked,"onUpdate:visible":t[4]||(t[4]=t=>e.passwordLevelChecked=t)},{content:s((()=>[(0,o.Wm)("div",i,[(0,o.Wm)("div",{class:e.passwordLevelClass}," 强度："+(0,n.zw)(e.passwordLevelName),3),(0,o.Wm)(b,{percent:e.percent,"show-info":!1,"stroke-color":e.passwordLevelColor},null,8,["percent","stroke-color"]),c])])),default:s((()=>[(0,o.Wm)(h,e.validateInfos.password,{default:s((()=>[(0,o.Wm)(W,{size:"large",placeholder:"至少6位密码，区分大小写",value:e.form.password,"onUpdate:value":t[2]||(t[2]=t=>e.form.password=t),onFocus:t[3]||(t[3]=t=>e.passwordLevelChecked=!0)},null,8,["value"])])),_:1},16)])),_:1},8,["get-popup-container","visible"]),(0,o.Wm)(h,e.validateInfos.confirmPassword,{default:s((()=>[(0,o.Wm)(W,{size:"large",placeholder:"确认密码",value:e.form.confirmPassword,"onUpdate:value":t[5]||(t[5]=t=>e.form.confirmPassword=t)},null,8,["value"])])),_:1},16),(0,o.Wm)(h,e.validateInfos.mobile,{default:s((()=>[(0,o.Wm)(w,{size:"large",placeholder:"11 位手机号",value:e.form.mobile,"onUpdate:value":t[6]||(t[6]=t=>e.form.mobile=t)},{addonBefore:s((()=>[(0,o.Wm)(k,{size:"large","default-value":"+86"},{default:s((()=>[(0,o.Wm)(y,{value:"+86"},{default:s((()=>[u])),_:1}),(0,o.Wm)(y,{value:"+87"},{default:s((()=>[d])),_:1})])),_:1})])),_:1},8,["value"])])),_:1},16),(0,o.Wm)(I,{gutter:16},{default:s((()=>[(0,o.Wm)(Z,{span:16},{default:s((()=>[(0,o.Wm)(h,e.validateInfos.captcha,{default:s((()=>[(0,o.Wm)(w,{size:"large",placeholder:"验证码",value:e.form.captcha,"onUpdate:value":t[7]||(t[7]=t=>e.form.captcha=t)},{prefix:s((()=>[(0,o.Wm)(_,{class:"prefix-icon"})])),_:1},8,["value"])])),_:1},16)])),_:1}),(0,o.Wm)(Z,{span:8},{default:s((()=>[(0,o.Wm)(x,{size:"large",block:"",onClick:e.getCaptcha},{default:s((()=>[(0,o.Uk)((0,n.zw)(e.smsSendBtn?`${e.time} s`:"获取验证码"),1)])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,o.Wm)(h,null,{default:s((()=>[(0,o.Wm)(x,{size:"large",type:"primary",loading:e.registerBtn,disabled:e.registerBtn,"html-type":"submit",style:{width:"50%"}},{default:s((()=>[p])),_:1},8,["loading","disabled"]),(0,o.Wm)(L,{class:"login",to:"/user/login",style:{float:"right","line-height":"40px"}},{default:s((()=>[m])),_:1})])),_:1})])),_:1},8,["model","onSubmit"])])}));a(923);var v=a(70473),g=(a(71784),a(61446)),w=a(2262),h=a(26640),b=a(42119),W=a(13796),C=a(80707);const y={0:"低",1:"低",2:"中",3:"强"},k={0:"error",1:"error",2:"warning",3:"success"},_={0:"#ff0000",1:"#ff0000",2:"#ff7e05",3:"#52c41a"};let Z;var x=(0,o.aZ)({name:"Register",setup(){const e=(0,b.tv)(),t=(0,w.qj)({time:60,smsSendBtn:!1,passwordLevel:0,passwordLevelChecked:!1,percent:10,progressColor:"#FF0000",registerBtn:!1}),a=(0,w.qj)({email:"",password:"",confirmPassword:"",mobile:"",captcha:""}),n=(0,w.qj)({email:[{required:!0,type:"email",message:"请输入邮箱地址"}],password:[{required:!0,message:"至少6位密码，区分大小写"},{validator:(e,a)=>new Promise(((e,o)=>{let n=0;/[0-9]/.test(a)&&n++,/[a-zA-Z]/.test(a)&&n++,/[^0-9a-zA-Z_]/.test(a)&&n++,t.passwordLevel=n,t.percent=30*n,n>=2?(n>=3&&(t.percent=100),e(null)):(0===n&&(t.percent=10),o(new Error("密码强度不够")))}))}],confirmPassword:[{required:!0,message:"至少6位密码，区分大小写"},{validator:(e,t)=>new Promise(((e,o)=>{const n=a.password;t||o(new Error("请输入密码")),t&&n&&t.trim()!==n.trim()&&o(new Error("两次密码不一致")),e(null)}))}],mobile:[{required:!0,message:"请输入正确的手机号",pattern:/^1[3456789]\d{9}$/}],captcha:[{required:!0,message:"请输入验证码"}]}),{validateInfos:s,validate:r}=(0,h.Z)(a,n);return{...(0,w.BK)(t),form:a,validateInfos:s,passwordLevelClass:(0,o.Fl)((()=>k[t.passwordLevel])),passwordLevelName:(0,o.Fl)((()=>y[t.passwordLevel])),passwordLevelColor:(0,o.Fl)((()=>_[t.passwordLevel])),getCaptcha:async function(e){try{e.preventDefault();const{mobile:a}=await r("mobile");Z=setInterval((()=>{t.time--<=0&&(t.time=60,t.smsSendBtn=!1,clearInterval(Z))}),1e3);const o=g.Z.loading("验证码发送中...",0),{captcha:n}=await class{static getSmsCaptcha(e){return C.Z.request({url:"/message/sms",method:"get",params:e})}}.getSmsCaptcha({mobile:a});setTimeout(o,3e3),v.Z.success({message:"提示",description:`验证码获取成功，您的验证码为：${n}`,duration:8})}catch(e){g.Z.destroy(),clearInterval(Z),t.time=60,t.smsSendBtn=!1}},handleSubmit:async function(a){try{a.preventDefault(),t.registerBtn=!0;const o=await r(),{data:{email:n}}=await W.Z.register(o);g.Z.info("注册成功"),await e.push({path:"/user/registerResult",query:{email:n}})}catch(a){t.registerBtn=!1}}}}});x.render=f,x.__scopeId="data-v-eac5fbf2";var I=x}}]);